<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CrossbarX &mdash; Minimal NDK Application Docs  documentation</title>
      <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../_static/css/theme_overrides.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script src="../../../../../_static/sphinx_highlight.js"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="Transaction Sorter" href="../trans_sorter/readme.html" />
    <link rel="prev" title="Miscellaneous" href="../../../../misc.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../index.html" class="icon icon-home">
            Minimal NDK Application Docs
          </a>
              <div class="version">
                Git branch: devel, <br> Git hash: 7d45a1dc
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Application:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../app-minimal.html">Minimal NDK application</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network Development Kit:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/doc/how_to_start.html">How to start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/doc/terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/intel/readme.html">NDK architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/doc/configuration.html">Configuration files and parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/doc/testing.html">NDK testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../build/readme.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/doc/devtree.html">Device Tree</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supported cards:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/agi-fh400g/readme.html">ReflexCES XpressSX AGI-FH400G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/dk-dev-1sdx-p/readme.html">Intel Stratix 10 DX FPGA DK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/dk-dev-agi027res/readme.html">Intel Agilex I-Series FPGA DK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/fb4cgg3/readme.html">Silicom fb4CGg3&#64;VU9P</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/fb2cghh/readme.html">Silicom fb2CGhh&#64;KU15P</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/ia-420f/readme.html">Bittware IA-420F</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">VHDL components:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../../base.html">Basic Tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../async.html">Asynchronous modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../memory.html">Memory modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../fifo.html">FIFO components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dsp.html">DSP components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../shift.html">Shift registers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../logic.html">Basic logic elements</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../../misc.html">Miscellaneous</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">CrossbarX</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#block-diagram">Block diagram</a></li>
<li class="toctree-l4"><a class="reference internal" href="#generics">Generics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ports">Ports</a></li>
<li class="toctree-l4"><a class="reference internal" href="#architecture">Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../trans_sorter/readme.html">Transaction Sorter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../packet_planner/readme.html">Packet Planner</a></li>
<li class="toctree-l3"><a class="reference internal" href="../event_counter/readme.html">Event Counter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pulse_short/readme.html">Pulse short</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ctrls.html">Controllers &amp; TSU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mi.html">MI Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mfb.html">MFB Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mvb.html">MVB Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nic.html">Network Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pcie.html">PCIe Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../debug.html">Debug Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ver.html">UVM Verification</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Minimal NDK Application Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../base.html">Basic Tools</a></li>
          <li class="breadcrumb-item"><a href="../../../../misc.html">Miscellaneous</a></li>
      <li class="breadcrumb-item active">CrossbarX</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../_sources/ofm_doc/comp/base/misc/crossbarx/readme.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="crossbarx">
<span id="id1"></span><h1>CrossbarX<a class="headerlink" href="#crossbarx" title="Permalink to this heading"></a></h1>
<p>This unit performs data transfer between two buffers connected on SRC_BUF and DST_BUF interfaces based on Transactions passed on the TRANS interface.
Transactions can be passed on multiple independent Streams.
Different Streams must have different Buffer A but common Buffer B.
Transactions passed in one CLK tick on one Stream must not overlap in its Buffer A.
CrossbarX unit solves collisions in Buffer B between all Transactions by planning the data transfers out-of-order.
To enable tracking of the data transfer actual progress.
The unit propagates Completed signal for each done Transaction together with its Metadata.
These Completed signals have the same order as the input Transactions (within each Stream).</p>
<section id="block-diagram">
<h2>Block diagram<a class="headerlink" href="#block-diagram" title="Permalink to this heading"></a></h2>
<a class="reference internal image-reference" href="../../../../../_images/CrossbarX.svg" id="crossbarx-block-diagram"><img alt="" id="crossbarx-block-diagram" src="../../../../../_images/CrossbarX.svg" width="100%" /></a>
</section>
<section id="generics">
<span id="crossbarx-generics"></span><h2>Generics<a class="headerlink" href="#generics" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DATA_DIR</p></td>
<td><p>Data transfer direction.
True for A to B, false for B to A.</p></td>
</tr>
<tr class="row-odd"><td><p>USE_CLK2</p></td>
<td><p>Transfer data using the double frequency clock.</p></td>
</tr>
<tr class="row-even"><td><p>USE_CLK_ARB</p></td>
<td><p>Transfer data on arbitrary frequency Clock.
(Overrides <code class="docutils literal notranslate"><span class="pre">USE_CLK2</span></code> when set to True.)
In this setting the Planner and Crossbar both run on the <code class="docutils literal notranslate"><span class="pre">CLK_ARB</span></code> and only process one transfer plan per cycle.
This way the Planner can read more than 100% of Instructions from its input in each cycle of <code class="docutils literal notranslate"><span class="pre">CLK</span></code> and can thus achieve higher spike throughput.</p></td>
</tr>
<tr class="row-odd"><td><p>TRANS_STREAMS</p></td>
<td><p>Number of independent Transaction Streams.</p></td>
</tr>
<tr class="row-even"><td><p>BUF_A_COLS</p></td>
<td><p>Number of Columns in Buffer A.</p></td>
</tr>
<tr class="row-odd"><td><p>BUF_A_STREAM_ROWS</p></td>
<td><p>Number of Rows in Buffer A for each Stream.</p></td>
</tr>
<tr class="row-even"><td><p>BUF_B_COLS</p></td>
<td><p>Number of Columns in Buffer B.</p></td>
</tr>
<tr class="row-odd"><td><p>BUF_B_ROWS</p></td>
<td><p>Number of Rows in Buffer B.</p></td>
</tr>
<tr class="row-even"><td><p>BUF_A_SECTIONS</p></td>
<td><p>Number of non-overlapping Sections of Buffer A.
(All Instructions must overflow inside space of one Buffer A Section.)</p></td>
</tr>
<tr class="row-odd"><td><p>BUF_B_SECTIONS</p></td>
<td><p>Number of non-overlapping Sections of Buffer B.
(All Instructions must overflow inside space of one Buffer B Section.)</p></td>
</tr>
<tr class="row-even"><td><p>ROW_ITEMS</p></td>
<td><p>Number of Items in one Buffer Row.</p></td>
</tr>
<tr class="row-odd"><td><p>ITEM_WIDTH</p></td>
<td><p>Width of one Item.</p></td>
</tr>
<tr class="row-even"><td><p>TRANSS</p></td>
<td><p>Number of input Transactions per Transaction Stream.</p></td>
</tr>
<tr class="row-odd"><td><p>TRANS_MTU</p></td>
<td><p>Maximum length of one Transaction (in number of Items).</p></td>
</tr>
<tr class="row-even"><td><p>METADATA_WIDTH</p></td>
<td><p>Width of Transaction user Metadata.</p></td>
</tr>
<tr class="row-odd"><td><p>TRANS_FIFO_ITEMS</p></td>
<td><p>Size of FIFO for Transaction awaiting completion (for <code class="docutils literal notranslate"><span class="pre">TRANS_COMP_</span></code> interface).
Defines the maximum number of Transactions inside at any moment! (on each Transaction Stream).
You should set this, so that the FIFO never fills up.</p></td>
</tr>
<tr class="row-even"><td><p>COLOR_TIMEOUT_WIDTH</p></td>
<td><p>Width of Color confirmation Timeout counter in Planner.
The resulting timeout takes <code class="docutils literal notranslate"><span class="pre">2**COLOR_TIMEOUT_WIDTH</span></code> cycles to expire.
This affects the maximum latency of <code class="docutils literal notranslate"><span class="pre">TRANS_COMP_</span></code> interface.
See <a class="reference internal" href="#crossbarx-color-timeout-width-warn"><span class="std std-ref">warning</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p>COLOR_CONF_DELAY</p></td>
<td><p>Delay of Color confirmation signal from Planner.
Setting this value too low will cause frequent changes of Color and thus a slightly lower throughput in Planner.
Setting it too high will cause greater filling of Transaction FIFO (see <code class="docutils literal notranslate"><span class="pre">TRANS_FIFO_ITEMS</span></code>) and increase the average <code class="docutils literal notranslate"><span class="pre">TRANS_COMP_</span></code> interface latency.</p></td>
</tr>
<tr class="row-even"><td><p>RD_LATENCY</p></td>
<td><p>Source Buffer read latency.</p></td>
</tr>
<tr class="row-odd"><td><p>DATA_MUX_LAT</p></td>
<td><p>Data transfer multiplexer’s latency (increase for better routing).</p></td>
</tr>
<tr class="row-even"><td><p>DATA_MUX_OUTREG_EN</p></td>
<td><p>Data transfer multiplexer’s output register enable (set to TRUE for better routing).</p></td>
</tr>
<tr class="row-odd"><td><p>DATA_ROT_LAT</p></td>
<td><p>Data Blocks rotation latency (increase for better routing).</p></td>
</tr>
<tr class="row-even"><td><p>DATA_ROT_OUTREG_EN</p></td>
<td><p>Data Blocks rotation output register enable (set to TRUE for better routing).</p></td>
</tr>
<tr class="row-odd"><td><p>DEVICE</p></td>
<td><p>Target FPGA device.</p></td>
</tr>
</tbody>
</table>
<div class="admonition warning" id="crossbarx-color-timeout-width-warn">
<p class="admonition-title">Warning</p>
<p>When <code class="docutils literal notranslate"><span class="pre">COLOR_TIMEOUT_WIDTH</span></code> is set too low, the Timeout might expire between the arrival
of <code class="docutils literal notranslate"><span class="pre">NEW_RX_TRANS</span></code> signal and the arrival of the corresponding <code class="docutils literal notranslate"><span class="pre">RX_UINSTR_SRC_RDY</span></code>.
This could break the entire Color confirmation mechanism!</p>
</div>
</section>
<section id="ports">
<span id="crossbarx-ports"></span><h2>Ports<a class="headerlink" href="#ports" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Dir</p></th>
<th class="head"><p>Dimension</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CLK</p></td>
<td><p>IN</p></td>
<td><p>[1]</p></td>
<td><p>Clock for Transaction input interface.</p></td>
</tr>
<tr class="row-odd"><td><p>CLK2</p></td>
<td><p>IN</p></td>
<td><p>[1]</p></td>
<td><p>Clock for data interfaces when <code class="docutils literal notranslate"><span class="pre">USE_CLK2==True</span></code> and <code class="docutils literal notranslate"><span class="pre">USE_CLK_ARB==False</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>RESET</p></td>
<td><p>IN</p></td>
<td><p>[1]</p></td>
<td><p>Reset for <code class="docutils literal notranslate"><span class="pre">CLK</span></code>. (Used for <code class="docutils literal notranslate"><span class="pre">CLK2</span></code> as well.)</p></td>
</tr>
<tr class="row-odd"><td><p>CLK_ARB</p></td>
<td><p>IN</p></td>
<td><p>[1]</p></td>
<td><p>Clock for data interfaces when <code class="docutils literal notranslate"><span class="pre">USE_CLK_ARB==True</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>RESET_ARB</p></td>
<td><p>IN</p></td>
<td><p>[1]</p></td>
<td><p>Reset for data interfaces when <code class="docutils literal notranslate"><span class="pre">USE_CLK_ARB==True</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>TRANS_A_COL</p></td>
<td><p>IN</p></td>
<td><p>[TRANS_STREAMS][log2(BUF_A_COLS)]</p></td>
<td><p>Column address of data in Buffer A. (Common for all Transactions on one Stream.)</p></td>
</tr>
<tr class="row-even"><td><p>TRANS_A_ITEM</p></td>
<td><p>IN</p></td>
<td><p>[TRANS_STREAMS][TRANSS][log2(BUF_A_STREAM_ROWS*ROW_ITEMS)]</p></td>
<td><p>Item address of data in Buffer A.</p></td>
</tr>
<tr class="row-odd"><td><p>TRANS_B_COL</p></td>
<td><p>IN</p></td>
<td><p>[TRANS_STREAMS][TRANSS][log2(BUF_B_COLS)]</p></td>
<td><p>Column address of data in Buffer B.</p></td>
</tr>
<tr class="row-even"><td><p>TRANS_B_ITEM</p></td>
<td><p>IN</p></td>
<td><p>[TRANS_STREAMS][TRANSS][log2(BUF_B_ROWS*ROW_ITEMS)]</p></td>
<td><p>Item address of data in Buffer B.</p></td>
</tr>
<tr class="row-odd"><td><p>TRANS_LEN</p></td>
<td><p>IN</p></td>
<td><p>[TRANS_STREAMS][TRANSS][log2(TRANS_MTU+1)]</p></td>
<td><p>Data length (in number of Items).</p></td>
</tr>
<tr class="row-even"><td><p>TRANS_META</p></td>
<td><p>IN</p></td>
<td><p>[TRANS_STREAMS][TRANSS][METADATA_WIDTH]</p></td>
<td><p>Transaction Metadata (if any).</p></td>
</tr>
<tr class="row-odd"><td><p>TRANS_VLD</p></td>
<td><p>IN</p></td>
<td><p>[TRANS_STREAMS][TRANSS]</p></td>
<td><p>Transaction valid (for each Transaction).</p></td>
</tr>
<tr class="row-even"><td><p>TRANS_SRC_RDY</p></td>
<td><p>IN</p></td>
<td><p>[TRANS_STREAMS]</p></td>
<td><p>Source ready (for each Stream).</p></td>
</tr>
<tr class="row-odd"><td><p>TRANS_DST_RDY</p></td>
<td><p>OUT</p></td>
<td><p>[TRANS_STREAMS]</p></td>
<td><p>Destination ready (for each Stream).</p></td>
</tr>
<tr class="row-even"><td><p>SRC_BUF_RD_ADDR</p></td>
<td><p>OUT</p></td>
<td><p>[SRC_BUF_ROWS][log2(SRC_BUF_COLS)]</p></td>
<td><p>Read address to Source Buffer (Buffer A or B depending on the value of <code class="docutils literal notranslate"><span class="pre">DATA_DIR</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p>SRC_BUF_RD_DATA</p></td>
<td><p>IN</p></td>
<td><p>[SRC_BUF_ROWS][ROW_ITEMS*ITEM_WIDTH]</p></td>
<td><p>Read data from Source Buffer (Buffer A or B depending on the value of <code class="docutils literal notranslate"><span class="pre">DATA_DIR</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p>DST_BUF_WR_ADDR</p></td>
<td><p>OUT</p></td>
<td><p>[DST_BUF_ROWS][log2(DST_BUF_COLS)]</p></td>
<td><p>Write address to Destination Buffer (Buffer B or A depending on the value of <code class="docutils literal notranslate"><span class="pre">DATA_DIR</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p>DST_BUF_WR_DATA</p></td>
<td><p>OUT</p></td>
<td><p>[DST_BUF_ROWS][ROW_ITEMS*ITEM_WIDTH]</p></td>
<td><p>Write data to Destination Buffer (Buffer B or A depending on the value of <code class="docutils literal notranslate"><span class="pre">DATA_DIR</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p>DST_BUF_WR_IE</p></td>
<td><p>OUT</p></td>
<td><p>[DST_BUF_ROWS][ROW_ITEMS]</p></td>
<td><p>Write Item Enable to Destination Buffer (Buffer B or A depending on the value of <code class="docutils literal notranslate"><span class="pre">DATA_DIR</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p>DST_BUF_WR_EN</p></td>
<td><p>OUT</p></td>
<td><p>[DST_BUF_ROWS]</p></td>
<td><p>Write Enable to Destination Buffer (Buffer B or A depending on the value of <code class="docutils literal notranslate"><span class="pre">DATA_DIR</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p>TRANS_COMP_META</p></td>
<td><p>OUT</p></td>
<td><p>[TRANS_STREAMS][TRANSS][METADATA_WIDTH]</p></td>
<td><p>Completed Transaction’s Metadata.</p></td>
</tr>
<tr class="row-odd"><td><p>TRANS_COMP_SRC_RDY</p></td>
<td><p>OUT</p></td>
<td><p>[TRANS_STREAMS][TRANSS]</p></td>
<td><p>Completed Transaction’s valid.</p></td>
</tr>
<tr class="row-even"><td><p>TRANS_COMP_DST_RDY</p></td>
<td><p>IN</p></td>
<td><p>[TRANS_STREAMS][TRANSS]</p></td>
<td><p>Completed Transaction’s read enable.
See <a class="reference internal" href="#crossbarx-comp-int-read-warn"><span class="std std-ref">warning</span></a>.</p></td>
</tr>
</tbody>
</table>
<div class="admonition warning" id="crossbarx-comp-int-read-warn">
<p class="admonition-title">Warning</p>
<p>The <code class="docutils literal notranslate"><span class="pre">TRANS_COMP_SRC_RDY</span></code> and <code class="docutils literal notranslate"><span class="pre">TRANS_COMP_DST_RDY</span></code> ports are propagated read interface from a FIFOX Multi
and must comply to reading restrictions for this component.
See FIFOX Multi documentation <a class="reference internal" href="../../fifo/fifox_multi/readme.html#fifox-multi"><span class="std std-ref">here</span></a>.</p>
</div>
</section>
<section id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Permalink to this heading"></a></h2>
<p>The internal architecture of CrossbarX can be seen in the above <a class="reference internal" href="#crossbarx-block-diagram"><span class="std std-ref">diagram</span></a>.
The main advantage of the CrossbarX is its scalability when performing parallel data transfers on a very wide data bus.
For this reason, the component allows to setup multiple <em>independent</em> Streams od Transactions.
Each Stream’s Transactions are processed in its own pipeline.
Only when the Transactions reach the component Planner, they are selected for parallel execution based on their read / write collisions.</p>
<a class="reference internal image-reference" href="../../../../../_images/crossbarx_trans_simple.svg" id="crossbarx-trans-processing"><img alt="" id="crossbarx-trans-processing" src="../../../../../_images/crossbarx_trans_simple.svg" width="100%" /></a>
<p>Each Transaction describes a block of data currently stored somewhere in the Source Buffer and ready to be transfered somewhere to the Desctination Buffer.
The preprocessing pipeline of each Stream disects each Transactions to atomic <em>Instructions</em>.
This disection is described in the Transaction processing <a class="reference internal" href="#crossbarx-trans-processing"><span class="std std-ref">diagram</span></a>.
Each Instruction describes a transfer of one Data Block (one Row within one Column).
Multiple Instructions can be processed in each cycle as long as they don’t use the same Row in neither the Source nor the Desctination Buffer.
The Planner is responsible for detection if these collisions and selection of a non-coliding subset from the input Instructions.</p>
<p>This selection process means, that the Instructions are actually performed out-of-order.
To allow the user to use data of completed Transactions in-order, the Planner, the Color Generator and the Transaction Sorter work together to provide in-order confirmation of each Transaction’s execution.
The Color Generator assigns a 1-bit <em>Color</em> to each Transaction.
The Color is first changed after the first set of Transactions (one input word).
This Color is propagated to Instructions created from the Transaction.
In each moment the Planner only considers input Instructions of one Color to be valid.
This eliminates the possibility of starvation since all Instructions of one Color <strong>must</strong> be processed before the other are even considered.
Once the Planner accepts all Instructions of one color, it switches to the other Color and sends a Confirmation to the Color Generator.
This Conformation causes the Color Buffer to switch Color as well and start assigning the new Color to newly incoming Transactions.
This way the Color Generator is always generating different Color than the Planner is currently accepting (except for the very first set of Transactions).</p>
<p>For each Transaction coming from the Color Generator a information is input to the Transaction Sorter (<a class="reference internal" href="../../fifo/fifox_multi/readme.html#fifox-multi"><span class="std std-ref">FIFOX Multi</span></a>).
This information contains the Transaction’s valid bit, Color bit and Metadata.
Here the information is store until a Conformation for its Color is generated by the Planner.
This is a signal, which says, that the data of all Transactions bearing this Color have been successfully executed (all their data are stored in the Destination Buffer).
At this point the Transaction Sorter allows the user to take the information out.
This way the user is safely informed about the Transaction’s completion in a in-order fashion.
The user can use the Metadata field to propagate any info regarding the Transactions which he intends to use after their completion.</p>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this heading"></a></h2>
<p>For more detailed description refer to Jan Kubalek’s <a class="reference external" href="https://www.fit.vut.cz/study/thesis-file/22958/22958.pdf">thesis</a> 2019/20.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../../../misc.html" class="btn btn-neutral float-left" title="Miscellaneous" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../trans_sorter/readme.html" class="btn btn-neutral float-right" title="Transaction Sorter" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, CESNET z.s.p.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>