<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Multi-port BRAM &mdash; Minimal NDK Application Docs  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/theme_overrides.css?v=b530091d" />

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="Live value table memory" href="../lvt_mem/readme.html" />
    <link rel="prev" title="Simple dual-port BRAM" href="../sdp_bram/readme.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../index.html" class="icon icon-home">
            Minimal NDK Application Docs
          </a>
              <div class="version">
                Git branch: devel, <br> Git hash: 5c8bcf72
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Application:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../app-minimal.html">Minimal NDK application</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network Development Kit:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/doc/how_to_start.html">How to start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/doc/terminology.html">NDK Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/intel/readme.html">NDK architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/intel/readme.html#build-system">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/doc/configuration.html">Configuration files and parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/doc/testing.html">NDK testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../build/readme.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/doc/devtree.html">Device Tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/doc/faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supported cards:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/reflexces/agi-fh400g/readme.html">ReflexCES XpressSX AGI-FH400G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/intel/dk-dev-1sdx-p/readme.html">Intel Stratix 10 DX FPGA DK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/intel/dk-dev-agi027res/readme.html">Intel Agilex I-Series FPGA DK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/silicom/fb4cgg3/readme.html">Silicom fb4CGg3&#64;VU9P</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/silicom/fb2cghh/readme.html">Silicom fb2CGhh&#64;KU15P</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/silicom/n6010/readme.html">Silicom N6010</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/bittware/ia-420f/readme.html">Bittware IA-420F</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/amd/alveo-u200/readme.html">AMD Alveo U200</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/amd/alveo-u55c/readme.html">AMD Alveo U55C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/amd/vcu118/readme.html">AMD VCU118&#64;VU9P</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">VHDL components:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../../base.html">Basic Tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../async.html">Asynchronous modules</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../../memory.html">Memory modules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../np_lutram/readme.html">NP LUT RAM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sdp_bram/readme.html">Simple dual-port BRAM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sdp_bram/readme.html#simple-dual-port-bram-with-byte-enable">Simple dual-port BRAM with Byte Enable</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Multi-port BRAM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lvt_mem/readme.html">Live value table memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../memory.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../fifo.html">FIFO components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dsp.html">DSP components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../shift.html">Shift registers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../logic.html">Basic logic elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../misc.html">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ctrls.html">Controllers &amp; TSU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mi.html">MI Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mfb.html">MFB Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mvb.html">MVB Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nic.html">Network Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pcie.html">PCIe Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../debug.html">Debug Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ver.html">UVM Verification</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Minimal NDK Application Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../base.html">Basic Tools</a></li>
          <li class="breadcrumb-item"><a href="../../../../memory.html">Memory modules</a></li>
      <li class="breadcrumb-item active">Multi-port BRAM</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../_sources/ofm_doc/comp/base/mem/mp_bram/readme.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="multi-port-bram">
<span id="mp-bram"></span><h1>Multi-port BRAM<a class="headerlink" href="#multi-port-bram" title="Link to this heading"></a></h1>
<dl class="vhdl autoentity">
<dt class="sig sig-object vhdl" id="vhdl-entity-mp_bram">
<span class="k"><span class="pre">ENTITY</span> </span><span class="sig-name descname"><span class="pre">MP_BRAM</span></span><span class="k"> <span class="pre">IS</span></span><a class="headerlink" href="#vhdl-entity-mp_bram" title="Link to this definition"></a></dt>
<dd><p>Multi-port BRAM. Currently supports only one write port. This will change in future.
Amount of read ports is not restricted.</p>
<span class="sig-name descname">Generics</span><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Generic</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even" id="vhdl-gengeneric-mp_bram-data_width"><td><p>DATA_WIDTH</p></td>
<td><p>integer</p></td>
<td><p>1</p></td>
<td><p>Data word width in bits. If BLOCK_ENABLE is True then DATA_WIDTH must
be N*BLOCK_WIDTH.</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-mp_bram-block_width"><td><p>BLOCK_WIDTH</p></td>
<td><p>integer</p></td>
<td><p>8</p></td>
<td><p>[1, inf] -&gt; block width</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-mp_bram-block_enable"><td><p>BLOCK_ENABLE</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-mp_bram-items"><td><p>ITEMS</p></td>
<td><p>integer</p></td>
<td><p>4096</p></td>
<td><p>Depth of BRAM in number of the data words.</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-mp_bram-output_reg"><td><p>OUTPUT_REG</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>Output directly from BRAM or throw register (better timing).</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-mp_bram-write_ports"><td><p>WRITE_PORTS</p></td>
<td><p>natural</p></td>
<td><p>1</p></td>
<td><p>Amount of write ports, currently supports just 1 write port.</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-mp_bram-read_ports"><td><p>READ_PORTS</p></td>
<td><p>natural</p></td>
<td><p>2</p></td>
<td><p>Amount of read ports. For each read port, BRAM is replicated to provide one
read port.</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-mp_bram-metadata_width"><td><p>METADATA_WIDTH</p></td>
<td><p>natural</p></td>
<td><p>0</p></td>
<td><p>metadata is data which is send with read request</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-mp_bram-undef_behaw_when_wr_to_same_address"><td><p>UNDEF_BEHAW_WHEN_WR_TO_SAME_ADDRESS</p></td>
<td><p>boolean</p></td>
<td><p>True</p></td>
<td><p>when this generic is disabled then two port can write to same address in one clock cycle.
Result are going to be undefined. This mean user have to secure there is no write to same
address in same clock.
Port wit lower id is prioritised and write data.
If this generic is true then this architecture desnt support write to same address
in same clock cycle from two ports</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-mp_bram-one_clk_write"><td><p>ONE_CLK_WRITE</p></td>
<td><p>boolean</p></td>
<td><p>False</p></td>
<td><p>If This generic is set to true then Write delay is shorter by bypassing
Normal write delay is two clock cycles. If this generic is set  to true tehn write delay is one clock.</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-mp_bram-device"><td><p>DEVICE</p></td>
<td><p>string</p></td>
<td><p>“AGILEX”</p></td>
<td><p>The DEVICE parameter allows the correct selection of the RAM
implementation according to the FPGA used. Supported values are:</p>
<ul class="simple">
<li><p>“7SERIES”</p></li>
<li><p>“ULTRASCALE”</p></li>
<li><p>“STRATIX10”</p></li>
<li><p>“ARRIA10”</p></li>
<li><p>“AGILEX”</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<span class="sig-name descname">Ports</span><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Port</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Mode</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even" id="vhdl-portsignal-mp_bram-clk"><td><p>CLK</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-mp_bram-reset"><td><p>RESET</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>=====</p></td>
<td><p>WRITE PORTS</p></td>
<td><p>=====</p></td>
<td><p>=====</p></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-mp_bram-wr_en"><td><p>WR_EN</p></td>
<td><p>std_logic_vector(WRITE_PORTS - 1 downto 0)</p></td>
<td><p>in</p></td>
<td><p>Enable of write port.</p></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-mp_bram-wr_addr"><td><p>WR_ADDR</p></td>
<td><p>slv_array_t(WRITE_PORTS - 1 downto 0)(log2(ITEMS)-1 downto 0)</p></td>
<td><p>in</p></td>
<td><p>Write address.</p></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-mp_bram-wr_data"><td><p>WR_DATA</p></td>
<td><p>slv_array_t(WRITE_PORTS - 1 downto 0)(DATA_WIDTH-1 downto 0)</p></td>
<td><p>in</p></td>
<td><p>Write data input.</p></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-mp_bram-wr_be"><td><p>WR_BE</p></td>
<td><p>slv_array_t(WRITE_PORTS - 1 downto 0)(DATA_WIDTH/tsel(BLOCK_ENABLE, BLOCK_WIDTH, DATA_WIDTH+1)-1 downto 0)</p></td>
<td><p>in</p></td>
<td><p>ENABLE block. you can write only part of data into memory (“0011”) =&gt; write only down 16 bits
Use work around when  BOCK_WIDTH is zero then width of signal is NULL. (DATA_WIDTH/(DATA_WIDTH +1) == 0)</p></td>
</tr>
<tr class="row-odd"><td><p>=====</p></td>
<td><p>READ PORTS</p></td>
<td><p>=====</p></td>
<td><p>=====</p></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-mp_bram-rd_en"><td><p>RD_EN</p></td>
<td><p>std_logic_vector(READ_PORTS - 1 downto 0)</p></td>
<td><p>in</p></td>
<td><p>Read enable signal, it is only used to generate RD_DATA_VLD.</p></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-mp_bram-rd_addr"><td><p>RD_ADDR</p></td>
<td><p>slv_array_t(READ_PORTS - 1 downto 0)(log2(ITEMS)-1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-mp_bram-rd_meta_in"><td><p>RD_META_IN</p></td>
<td><p>slv_array_t(READ_PORTS - 1 downto 0)(METADATA_WIDTH-1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-mp_bram-rd_data_vld"><td><p>RD_DATA_VLD</p></td>
<td><p>std_logic_vector(READ_PORTS - 1 downto 0)</p></td>
<td><p>out</p></td>
<td><p>Read data output.</p></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-mp_bram-rd_data"><td><p>RD_DATA</p></td>
<td><p>slv_array_t(READ_PORTS - 1 downto 0)(DATA_WIDTH-1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-mp_bram-rd_meta_out"><td><p>RD_META_OUT</p></td>
<td><p>slv_array_t(READ_PORTS - 1 downto 0)(METADATA_WIDTH-1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
</tbody>
</table>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../sdp_bram/readme.html" class="btn btn-neutral float-left" title="Simple dual-port BRAM" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../lvt_mem/readme.html" class="btn btn-neutral float-right" title="Live value table memory" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, CESNET z.s.p.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>