<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MI Reconfigurator &mdash; Minimal NDK Application Docs  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme_overrides.css?v=b530091d" />

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="MI Splitter Plus Gen" href="../splitter_plus_gen/readme.html" />
    <link rel="prev" title="MI indirect access" href="../indirect_access/readme.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            Minimal NDK Application Docs
          </a>
              <div class="version">
                Git branch: devel, <br> Git hash: 04cd4747
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Application:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../app-minimal.html">Minimal NDK application</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network Development Kit:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_core/doc/how_to_start.html">How to start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_core/doc/terminology.html">NDK Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_core/intel/readme.html">NDK architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_core/intel/readme.html#build-system">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_core/doc/configuration.html">Configuration files and parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_core/doc/testing.html">NDK testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../build/readme.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_core/doc/devtree.html">Device Tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_core/doc/faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supported cards:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/reflexces/agi-fh400g/readme.html">ReflexCES XpressSX AGI-FH400G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/intel/dk-dev-1sdx-p/readme.html">Intel Stratix 10 DX FPGA DK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/intel/dk-dev-agi027res/readme.html">Intel Agilex I-Series FPGA DK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/silicom/fb4cgg3/readme.html">Silicom fb4CGg3&#64;VU9P</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/silicom/fb2cghh/readme.html">Silicom fb2CGhh&#64;KU15P</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/silicom/n6010/readme.html">Silicom N6010</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/bittware/ia-420f/readme.html">Bittware IA-420F</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/amd/alveo-u200/readme.html">AMD Alveo U200</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/amd/alveo-u55c/readme.html">AMD Alveo U55C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/amd/vcu118/readme.html">AMD VCU118&#64;VU9P</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">VHDL components:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../base.html">Basic Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ctrls.html">Controllers &amp; TSU</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../mi.html">MI Tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../readme.html">MI bus specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../async/readme.html">MI ASYNC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipe/readme.html">MI Pipe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../indirect_access/readme.html">MI indirect access</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">MI Reconfigurator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#architecture">Architecture</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../splitter_plus_gen/readme.html">MI Splitter Plus Gen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../converters/mi2avmm/readme.html">MI2AVMM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../converters/mi2axi4/readme.html">MI2AXI4</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../mfb.html">MFB Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mvb.html">MVB Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nic.html">Network Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pcie.html">PCIe Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../debug.html">Debug Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ver.html">UVM Verification</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Minimal NDK Application Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../mi.html">MI Tools</a></li>
      <li class="breadcrumb-item active">MI Reconfigurator</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/ofm_doc/comp/mi_tools/reconf/readme.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="mi-reconfigurator">
<span id="id1"></span><h1>MI Reconfigurator<a class="headerlink" href="#mi-reconfigurator" title="Link to this heading"></a></h1>
<p>The MI Reconfigurator can be used to modify the width of the MI interface.
Both RX and TX data width has to be a power of 2 and at least 8 bits.</p>
<section id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Link to this heading"></a></h2>
<p>The architecture has 3 different shapes depending on the configuration:</p>
<ol class="arabic">
<li><p>RX width == TX width</p>
<blockquote>
<div><p>When the data width is not being changed at all, the component is reduced to direct signal connections.</p>
</div></blockquote>
</li>
<li><p>RX width &lt; TX width</p>
<blockquote>
<div><p>The situation is explained in following example.
The RX interface is a standard MI32 interface (4 bytes).
On the TX interface, we want to address 8-byte registers (MI64).</p>
<p>Every byte has its own address on the MI, however, we use addresses aligned to 4 bytes to access the MI32 registers (i.e., registers that contain data of 4 bytes).
In other words, when using 4-byte data words, the lowest log2(4) bits of the addres have to be 0.
If we increase the data width, the address alignment will change as well.
So to access 8-byte registers on the TX interface, the addresses must be aligned to multiples of 8 (= the lowest log2(8) bits of the addres have to be 0).
Hopefully, this description with the following diagram explains the situation well enough.</p>
<a class="reference internal image-reference" href="../../../../_images/mi_reconfigurator_dwr_up2.svg"><img alt="" class="align-center" src="../../../../_images/mi_reconfigurator_dwr_up2.svg" style="width: 60%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>When the data width is being increased, the following has to be done:</p>
<p>The target address on the MI bus always has to be aligned to a whole MI data word.
When converting to a wider bus, the valid data have to be shifted to the correct position in the TX DWR and the RX ADDR has to be rounded down.
The data validity is then signaled by the TX BE (Byte Enable).</p>
<p>The same has to be done for read requests as well, only the shifting is done the other way around for the TX DRD.
(The unit has to remember the lowest bits of the original request to shift the DRD correctly.)</p>
<a class="reference internal image-reference" href="../../../../_images/mi_reconfigurator_dwr_up.svg"><img alt="" class="align-center" src="../../../../_images/mi_reconfigurator_dwr_up.svg" style="width: 60%;" /></a>
</div></blockquote>
</li>
<li><p>RX width &gt; TX width</p>
<blockquote>
<div><p>In this case, each RX request might require to produce multiple TX requests.
This means that each request might take multiple cycles to process.
To reduce the required time, the unit only propagates valid parts of the requests based on the RX BE value and <em>does not generate any TX requests with TX BE == 0</em>.
The most complicated part here is the processing of read request DRD signals.</p>
<p>In this mode, the component doesn’t support execution of multiple parallel requests.</p>
</div></blockquote>
</li>
</ol>
<a class="reference internal image-reference" href="../../../../_images/mi_reconfigurator_dwr_down.svg"><img alt="" class="align-center" src="../../../../_images/mi_reconfigurator_dwr_down.svg" style="width: 60%;" /></a>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../indirect_access/readme.html" class="btn btn-neutral float-left" title="MI indirect access" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../splitter_plus_gen/readme.html" class="btn btn-neutral float-right" title="MI Splitter Plus Gen" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, CESNET z.s.p.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>