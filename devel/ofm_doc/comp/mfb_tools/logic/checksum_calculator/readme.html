

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Checksum Calculator &mdash; Minimal NDK Application Docs  documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../_static/css/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script src="../../../../../_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="MFB Packet Discard ASFIFO" href="../../storage/pd_asfifo/readme.html" />
    <link rel="prev" title="CrossbarX Stream" href="../crossbarx_stream/readme.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> Minimal NDK Application Docs
          

          
          </a>

          
            
            
              <div class="version">
                Git branch: cabal_github_ci, <br> Git hash: d2b6e3ad
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Application:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../app-minimal.html">Minimal NDK application</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network Development Kit:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/doc/how_to_start.html">How to start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/doc/terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/intel/readme.html">NDK architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/doc/configuration.html">Configuration files and parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/doc/testing.html">NDK testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../build/readme.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_core/doc/devtree.html">Device Tree</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supported cards:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/agi-fh400g/readme.html">ReflexCES XpressSX AGI-FH400G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/dk-dev-1sdx-p/readme.html">Intel Stratix 10 DX FPGA DK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/dk-dev-agi027res/readme.html">Intel Agilex I-Series FPGA DK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/fb4cgg3/readme.html">Silicom fb4CGg3&#64;VU9P</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ndk_cards/fb2cghh/readme.html">Silicom fb2CGhh&#64;KU15P</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">VHDL components:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../base.html">Basic Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ctrls.html">Controllers &amp; TSU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mi.html">MI Tools</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../mfb.html">MFB Tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../readme.html">MFB specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/reconfigurator/readme.html">MFB Reconfigurator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/superunpacketer/readme.html">SuperUnPacketer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/splitter_simple/readme.html">MFB Splitter Simple Gen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/merger_simple/readme.html">MFB Merger Simple</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/cutter_simple/readme.html">MFB Cutter Simple</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/dropper/readme.html">MFB Dropper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crossbarx_stream/readme.html">CrossbarX Stream</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Checksum Calculator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../storage/pd_asfifo/readme.html">MFB Packet Discard ASFIFO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debug/gen_loop_switch/readme.html">Gen Loop Switch (GLS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debug/generator/readme.html">MFB Generator</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mvb.html">MVB Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nic.html">Network Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pcie.html">PCIe Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../debug.html">Debug Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ver.html">UVM Verification</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Minimal NDK Application Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../mfb.html">MFB Tools</a> &raquo;</li>
        
      <li>Checksum Calculator</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../../_sources/ofm_doc/comp/mfb_tools/logic/checksum_calculator/readme.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="checksum-calculator">
<span id="id1"></span><h1>Checksum Calculator<a class="headerlink" href="#checksum-calculator" title="Permalink to this heading">¶</a></h1>
<dl class="vhdl autoentity">
<dt class="sig sig-object vhdl" id="vhdl-entity-checksum_calculator">
<span class="k"><span class="pre">ENTITY</span> </span><span class="sig-name descname"><span class="pre">CHECKSUM_CALCULATOR</span></span><span class="k"> <span class="pre">IS</span></span><a class="headerlink" href="#vhdl-entity-checksum_calculator" title="Permalink to this definition">¶</a></dt>
<dd><p>This component calculates checksum for the IPv4, TCP, and UDP protocols.
Along with the frame data (from which the checksums are calculated), it
expects additional information (valid with SOF) as input. This includes the
length of the L2 header (i.e., the offset of the L3 header), length of the
L3 header (i.e., the offset of the L4 header), and flags (see
<a class="reference internal" href="#vhdl-portsignal-checksum_calculator-rx_flags"><code class="xref vhdl vhdl-portsignal docutils literal notranslate"><span class="pre">RX_FLAGS</span></code></a> port).</p>
<span class="sig-name descname">Generics</span><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Generic</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even" id="vhdl-gengeneric-checksum_calculator-mfb_regions"><td><p>MFB_REGIONS</p></td>
<td><p>natural</p></td>
<td><p>4</p></td>
<td><p>Number of Regions within a data word, must be power of 2.</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-checksum_calculator-mfb_region_size"><td><p>MFB_REGION_SIZE</p></td>
<td><p>natural</p></td>
<td><p>8</p></td>
<td><p>Region size (in Blocks).</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-checksum_calculator-mfb_block_size"><td><p>MFB_BLOCK_SIZE</p></td>
<td><p>natural</p></td>
<td><p>8</p></td>
<td><p>Block size (in Items).</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-checksum_calculator-mfb_item_width"><td><p>MFB_ITEM_WIDTH</p></td>
<td><p>natural</p></td>
<td><p>8</p></td>
<td><p>Item width (in bits), must be 8.</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-checksum_calculator-device"><td><p>DEVICE</p></td>
<td><p>string</p></td>
<td><p>“STRATIX10”</p></td>
<td><p>FPGA device name.
Options: ULTRASCALE, STRATIX10, AGILEX, …</p></td>
</tr>
</tbody>
</table>
<span class="sig-name descname">Ports</span><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Port</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Mode</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>=====</p></td>
<td><p>Clock and Reset</p></td>
<td><p>=====</p></td>
<td><p>=====</p></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-checksum_calculator-clk"><td><p>CLK</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-checksum_calculator-reset"><td><p>RESET</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>=====</p></td>
<td><p>RX STREAM</p></td>
<td><p>=====</p></td>
<td><ol class="arabic simple">
<li><p>Input packets (MFB),</p></li>
<li><p>Meta information (header lengths, flags) valid with SOF.</p></li>
</ol>
</td>
</tr>
<tr class="row-even" id="vhdl-portsignal-checksum_calculator-rx_mfb_data"><td><p>RX_MFB_DATA</p></td>
<td><p>std_logic_vector(MFB_REGIONS*MFB_REGION_SIZE*MFB_BLOCK_SIZE*MFB_ITEM_WIDTH-1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-checksum_calculator-rx_mfb_sof_pos"><td><p>RX_MFB_SOF_POS</p></td>
<td><p>std_logic_vector(MFB_REGIONS*max(1,log2(MFB_REGION_SIZE))-1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-checksum_calculator-rx_mfb_eof_pos"><td><p>RX_MFB_EOF_POS</p></td>
<td><p>std_logic_vector(MFB_REGIONS*max(1,log2(MFB_REGION_SIZE*MFB_BLOCK_SIZE))-1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-checksum_calculator-rx_mfb_sof"><td><p>RX_MFB_SOF</p></td>
<td><p>std_logic_vector(MFB_REGIONS-1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-checksum_calculator-rx_mfb_eof"><td><p>RX_MFB_EOF</p></td>
<td><p>std_logic_vector(MFB_REGIONS-1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-checksum_calculator-rx_mfb_src_rdy"><td><p>RX_MFB_SRC_RDY</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-checksum_calculator-rx_mfb_dst_rdy"><td><p>RX_MFB_DST_RDY</p></td>
<td><p>std_logic</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-checksum_calculator-rx_l2_hdr_length"><td><p>RX_L2_HDR_LENGTH</p></td>
<td><p>std_logic_vector(MFB_REGIONS*7-1 downto 0)</p></td>
<td><p>in</p></td>
<td><p>L3 header offset.</p></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-checksum_calculator-rx_l3_hdr_length"><td><p>RX_L3_HDR_LENGTH</p></td>
<td><p>std_logic_vector(MFB_REGIONS*9-1 downto 0)</p></td>
<td><p>in</p></td>
<td><p>L4 header offset.</p></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-checksum_calculator-rx_flags"><td><p>RX_FLAGS</p></td>
<td><p>std_logic_vector(MFB_REGIONS*4-1 downto 0)</p></td>
<td><p>in</p></td>
<td><p>Flag items:</p>
<ul class="simple">
<li><p>RX_FLAGS[3]: L4 protocol, 1 = TCP, 0 = UDP</p></li>
<li><p>RX_FLAGS[2]: L3 protocol, 1 = IPv4, 0 = IPv6</p></li>
<li><p>RX_FLAGS[1]: TCP/UDP checksum enable</p></li>
<li><p>RX_FLAGS[0]: IPv4 checksum enable</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>=====</p></td>
<td><p>TX MVB STREAM</p></td>
<td><p>=====</p></td>
<td><p>Calculated checksums.</p></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-checksum_calculator-tx_l3_mvb_data"><td><p>TX_L3_MVB_DATA</p></td>
<td><p>std_logic_vector(MFB_REGIONS*16-1 downto 0)</p></td>
<td><p>out</p></td>
<td><p>The calculated checksum.</p></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-checksum_calculator-tx_l3_chsum_bypass"><td><p>TX_L3_CHSUM_BYPASS</p></td>
<td><p>std_logic_vector(MFB_REGIONS-1 downto 0)</p></td>
<td><p>out</p></td>
<td><p>Bypass checksum insertion (=&gt; checksum caluculation is not desired).</p></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-checksum_calculator-tx_l3_mvb_vld"><td><p>TX_L3_MVB_VLD</p></td>
<td><p>std_logic_vector(MFB_REGIONS-1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-checksum_calculator-tx_l3_mvb_src_rdy"><td><p>TX_L3_MVB_SRC_RDY</p></td>
<td><p>std_logic</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-checksum_calculator-tx_l3_mvb_dst_rdy"><td><p>TX_L3_MVB_DST_RDY</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-checksum_calculator-tx_l4_mvb_data"><td><p>TX_L4_MVB_DATA</p></td>
<td><p>std_logic_vector(MFB_REGIONS*16-1 downto 0)</p></td>
<td><p>out</p></td>
<td><p>The calculated checksum.</p></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-checksum_calculator-tx_l4_chsum_bypass"><td><p>TX_L4_CHSUM_BYPASS</p></td>
<td><p>std_logic_vector(MFB_REGIONS-1 downto 0)</p></td>
<td><p>out</p></td>
<td><p>Bypass checksum insertion (=&gt; checksum caluculation is not desired).</p></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-checksum_calculator-tx_l4_mvb_vld"><td><p>TX_L4_MVB_VLD</p></td>
<td><p>std_logic_vector(MFB_REGIONS-1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-checksum_calculator-tx_l4_mvb_src_rdy"><td><p>TX_L4_MVB_SRC_RDY</p></td>
<td><p>std_logic</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-checksum_calculator-tx_l4_mvb_dst_rdy"><td><p>TX_L4_MVB_DST_RDY</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
</tbody>
</table>
</dd></dl>

</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../../storage/pd_asfifo/readme.html" class="btn btn-neutral float-right" title="MFB Packet Discard ASFIFO" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../crossbarx_stream/readme.html" class="btn btn-neutral float-left" title="CrossbarX Stream" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2023, CESNET z.s.p.o..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>