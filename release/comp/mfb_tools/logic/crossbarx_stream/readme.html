

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CrossbarX Stream &mdash; NDK-FPGA Docs  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme_overrides.css?v=b530091d" />

  
      <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Checksum Calculator" href="../checksum_calculator/readme.html" />
    <link rel="prev" title="MFB FRAME EXTENDER" href="../../edit/frame_extender/readme.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            NDK-FPGA Docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Application:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../app-minimal.html">Minimal NDK application</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network Development Kit:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_core/doc/how_to_start.html">How to start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_core/doc/terminology.html">NDK Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_core/doc/readme.html">NDK Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_core/doc/configuration.html">Configuration files and parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_core/doc/testing.html">NDK testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_build/readme.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_core/doc/devtree.html">Device Tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_core/doc/faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supported cards:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/reflexces/agi-fh400g/readme.html">ReflexCES XpressSX AGI-FH400G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/intel/dk-dev-1sdx-p/readme.html">Intel Stratix 10 DX FPGA DK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/intel/dk-dev-agi027res/readme.html">Intel Agilex I-Series FPGA DK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/silicom/fb4cgg3/readme.html">Silicom fb4CGg3&#64;VU9P</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/silicom/fb2cghh/readme.html">Silicom fb2CGhh&#64;KU15P</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/silicom/n6010/readme.html">Silicom N6010</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/bittware/ia-420f/readme.html">Bittware IA-420F</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/amd/alveo-u200/readme.html">AMD Alveo U200</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/amd/alveo-u55c/readme.html">AMD Alveo U55C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/amd/vcu118/readme.html">AMD VCU118&#64;VU9P</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ndk_cards/prodesign/pd-falcon/readme.html">PRO DESIGN Falcon</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">VHDL components:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../base.html">Basic Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ctrls.html">Controllers &amp; TSU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mi.html">MI Tools</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../mfb.html">MFB Tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../readme.html">MFB specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/reconfigurator/readme.html">MFB Reconfigurator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/frame_packer/readme.html">Frame Packer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/frame_unpacker/readme.html">Frame Unpacker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/splitter_simple/readme.html">MFB Splitter Simple</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/splitter_simple/readme.html#id1">MFB Splitter Simple Gen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/merger_simple/readme.html">MFB Merger Simple</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/merger_simple/readme.html#id1">MFB Merger Simple GEN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/cutter_simple/readme.html">MFB Cutter Simple</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/dropper/readme.html">MFB Dropper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/metadata_insertor/readme.html">Metadata Insertor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/transformer/readme.html">MFB Trasformer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/pipe/readme.html">MFB PIPE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/merger/readme.html">MFB Merger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/splitter/readme.html">MFB Splitter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/splitter/readme.html#id1">MFB Splitter Gen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/enabler/readme.html">MFB Enabler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/rate_limiter/readme.html">Rate Limiter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/packet_delayer/readme.html">Packet Delayer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/timestamp_limiter/readme.html">Timestamp Limiter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/loopback/readme.html">MFB Loopback</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/crossbarx_stream2/readme.html">CROSSBARX STREAM2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flow/frame_masker/readme.html">MFB Frame Masker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../edit/frame_trimmer/readme.html">MFB FRAME TRIMMER</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../edit/frame_extender/readme.html">MFB FRAME EXTENDER</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">CrossbarX Stream</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#block-diagram">Block diagram</a></li>
<li class="toctree-l3"><a class="reference internal" href="#operations">Operations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../checksum_calculator/readme.html">Checksum Calculator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auxiliary_signals/readme.html">MFB Auxiliary Signals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../storage/pd_asfifo/readme.html">MFB Packet Discard ASFIFO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../storage/pd_asfifo_simple/readme.html">MFB PD ASFIFO SIMPLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../storage/asfifox/readme.html">MFB ASFIFOX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../storage/fifox/readme.html">MFB FIFOX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../storage/crossbarx_output_buffer/readme.html">Crossbarx Output Buffer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debug/gen_loop_switch/readme.html">Gen Loop Switch (GLS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debug/generator/readme.html">MFB Generator</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mvb.html">MVB Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nic.html">Network Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../pcie.html">PCIe Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../debug.html">Debug Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ver.html">UVM Verification</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">NDK-FPGA Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../mfb.html">MFB Tools</a></li>
      <li class="breadcrumb-item active">CrossbarX Stream</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/comp/mfb_tools/logic/crossbarx_stream/readme.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="crossbarx-stream">
<span id="id1"></span><h1>CrossbarX Stream<a class="headerlink" href="#crossbarx-stream" title="Link to this heading"></a></h1>
<dl class="vhdl autoentity">
<dt class="sig sig-object vhdl" id="vhdl-entity-crossbarx_stream">
<span class="k"><span class="pre">ENTITY</span> </span><span class="sig-name descname"><span class="pre">CROSSBARX_STREAM</span></span><span class="k"> <span class="pre">IS</span></span><a class="headerlink" href="#vhdl-entity-crossbarx_stream" title="Link to this definition"></a></dt>
<dd><p>This unit can:</p>
<ul class="simple">
<li><p>discard packets,</p></li>
<li><p>insert gaps between packets and</p></li>
<li><p>extend and/or shrink them from the front and/or from the back.</p></li>
</ul>
<p>The CrossbarX component transfers the transactions from the Input buffer
to the Output buffer according to the instructions provided by the Packet
Planner component.
The instructions consist of a transaction’s length, its address in the
Input buffer, and in the Output buffer.</p>
<span class="sig-name descname">Generics</span><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Generic</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even" id="vhdl-gengeneric-crossbarx_stream-cx_use_clk2"><td><p>CX_USE_CLK2</p></td>
<td><p>boolean</p></td>
<td><p>true</p></td>
<td><p>Clock settings for 1) CrossbarX and 2) Output buffer
1) CrossbarX
Transfer data on double frequency Clock.</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-crossbarx_stream-cx_use_clk_arb"><td><p>CX_USE_CLK_ARB</p></td>
<td><p>boolean</p></td>
<td><p>false</p></td>
<td><p>Transfer data on arbitrary frequency Clock.
(Overrides CX_USE_CLK2 when set to True.)
See entity of CrossbarX for more detail.</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-crossbarx_stream-obuf_meta_eq_output"><td><p>OBUF_META_EQ_OUTPUT</p></td>
<td><p>boolean</p></td>
<td><p>false</p></td>
<td><p>2) Output buffer
Set True when RX_CLK has the same period as TX_CLK.</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-crossbarx_stream-obuf_input_eq_output"><td><p>OBUF_INPUT_EQ_OUTPUT</p></td>
<td><p>boolean</p></td>
<td><p>false</p></td>
<td><p>Set True when not using CLK2 or CLK_ARB and
RX_CLK has the same period as TX_CLK.</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-crossbarx_stream-mfb_regions"><td><p>MFB_REGIONS</p></td>
<td><p>natural</p></td>
<td><p>4</p></td>
<td><p>Number of Regions within a data word, must be power of 2.</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-crossbarx_stream-mfb_region_size"><td><p>MFB_REGION_SIZE</p></td>
<td><p>natural</p></td>
<td><p>8</p></td>
<td><p>Region size (in Blocks).</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-crossbarx_stream-mfb_block_size"><td><p>MFB_BLOCK_SIZE</p></td>
<td><p>natural</p></td>
<td><p>8</p></td>
<td><p>Block size (in Items).</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-crossbarx_stream-mfb_item_width"><td><p>MFB_ITEM_WIDTH</p></td>
<td><p>natural</p></td>
<td><p>8</p></td>
<td><p>Item width (in bits), must be 8.</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-crossbarx_stream-mfb_meta_width"><td><p>MFB_META_WIDTH</p></td>
<td><p>natural</p></td>
<td><p>1</p></td>
<td><p>Width of MFB metadata (in bits).</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-crossbarx_stream-pkt_mtu"><td><p>PKT_MTU</p></td>
<td><p>natural</p></td>
<td><p>1024</p></td>
<td><p>Maximum packet size in MFB ITEMS.</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-crossbarx_stream-num_of_pkts"><td><p>NUM_OF_PKTS</p></td>
<td><p>natural</p></td>
<td><p>4</p></td>
<td><p>Number of maximum sized packets in Input and Output buffer
MUST be a power of 2
(4 -&gt; ~150 Gb/s, 8 -&gt; ~400 Gb/s)</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-crossbarx_stream-trans_fifo_size"><td><p>TRANS_FIFO_SIZE</p></td>
<td><p>natural</p></td>
<td><p>64</p></td>
<td><p>Maximum number of Transaction waiting for data transfer.
Setting this value too low will lead to lower throughput,
which should trigger a simulation assert warning in component CrossbarX.</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-crossbarx_stream-f_gap_adjust_en"><td><p>F_GAP_ADJUST_EN</p></td>
<td><p>boolean</p></td>
<td><p>false</p></td>
<td><p>CrossbarX Stream functions setup ————————————
Insert gaps of defined size between packets.
When set to False, the smallest possible gap is used.</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-crossbarx_stream-f_gap_adjust_size_avg"><td><p>F_GAP_ADJUST_SIZE_AVG</p></td>
<td><p>natural</p></td>
<td><p>24</p></td>
<td><p>Required average gap after every packet in MFB ITEMS.
Differences in gaps are calculated according to the Deficit Idle Count algorithm.
If AVG size is equal to MIN size, all gap sizes will be greater or equal to MIN size.
MUST be greater or equal to F_GAP_ADJUST_SIZE_MIN!</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-crossbarx_stream-f_gap_adjust_size_min"><td><p>F_GAP_ADJUST_SIZE_MIN</p></td>
<td><p>natural</p></td>
<td><p>24</p></td>
<td><p>MUST be greater or equal to MFB_BLOCK_SIZE!</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-crossbarx_stream-f_extend_start_en"><td><p>F_EXTEND_START_EN</p></td>
<td><p>boolean</p></td>
<td><p>false</p></td>
<td><p>Enable to extend (or shrink) packets at the front.</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-crossbarx_stream-f_extend_start_size"><td><p>F_EXTEND_START_SIZE</p></td>
<td><p>integer</p></td>
<td><p>-4</p></td>
<td><p>In MFB ITEMS, negative number for packet shrinking.</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-crossbarx_stream-f_extend_end_en"><td><p>F_EXTEND_END_EN</p></td>
<td><p>boolean</p></td>
<td><p>false</p></td>
<td><p>Enable to extend (or shrink) packets at the back.</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-crossbarx_stream-f_extend_end_size"><td><p>F_EXTEND_END_SIZE</p></td>
<td><p>integer</p></td>
<td><p>-5</p></td>
<td><p>In MFB ITEMS, negative number for packet shrinking.</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-crossbarx_stream-device"><td><p>DEVICE</p></td>
<td><p>string</p></td>
<td><p>“STRATIX10”</p></td>
<td><p>FPGA device name: ULTRASCALE, STRATIX10, ..</p></td>
</tr>
</tbody>
</table>
<span class="sig-name descname">Ports</span><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Port</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Mode</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>=====</p></td>
<td><p>Clock and Reset</p></td>
<td><p>=====</p></td>
<td><p>=====</p></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-crossbarx_stream-rx_clk"><td><p>RX_CLK</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-crossbarx_stream-rx_clk2"><td><p>RX_CLK2</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td><p>Double frequency and same source as RX_CLK
Only used when CX_USE_CLK2==True and CX_USE_CLK_ARB==False</p></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-crossbarx_stream-rx_reset"><td><p>RX_RESET</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-crossbarx_stream-tx_clk"><td><p>TX_CLK</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-crossbarx_stream-tx_reset"><td><p>TX_RESET</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-crossbarx_stream-cx_clk_arb"><td><p>CX_CLK_ARB</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td><p>Arbitrary Clock and Reset for CrossbarX, only used when CX_USE_CLK_ARB==True</p></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-crossbarx_stream-cx_reset_arb"><td><p>CX_RESET_ARB</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>=====</p></td>
<td><p>RX MFB STREAM</p></td>
<td><p>=====</p></td>
<td><p>=====</p></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-crossbarx_stream-rx_mfb_data"><td><p>RX_MFB_DATA</p></td>
<td><p>std_logic_vector(MFB_REGIONS*MFB_REGION_SIZE*MFB_BLOCK_SIZE*MFB_ITEM_WIDTH-1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-crossbarx_stream-rx_mfb_meta"><td><p>RX_MFB_META</p></td>
<td><p>std_logic_vector(MFB_REGIONS*MFB_META_WIDTH-1 downto 0)</p></td>
<td><p>in</p></td>
<td><p>valid with EOF</p></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-crossbarx_stream-rx_mfb_discard"><td><p>RX_MFB_DISCARD</p></td>
<td><p>std_logic_vector(MFB_REGIONS-1 downto 0)</p></td>
<td><p>in</p></td>
<td><p>valid with EOF</p></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-crossbarx_stream-rx_mfb_sof_pos"><td><p>RX_MFB_SOF_POS</p></td>
<td><p>std_logic_vector(MFB_REGIONS*max(1,log2(MFB_REGION_SIZE))-1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-crossbarx_stream-rx_mfb_eof_pos"><td><p>RX_MFB_EOF_POS</p></td>
<td><p>std_logic_vector(MFB_REGIONS*max(1,log2(MFB_REGION_SIZE*MFB_BLOCK_SIZE))-1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-crossbarx_stream-rx_mfb_sof"><td><p>RX_MFB_SOF</p></td>
<td><p>std_logic_vector(MFB_REGIONS-1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-crossbarx_stream-rx_mfb_eof"><td><p>RX_MFB_EOF</p></td>
<td><p>std_logic_vector(MFB_REGIONS-1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-crossbarx_stream-rx_mfb_src_rdy"><td><p>RX_MFB_SRC_RDY</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-crossbarx_stream-rx_mfb_dst_rdy"><td><p>RX_MFB_DST_RDY</p></td>
<td><p>std_logic</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>=====</p></td>
<td><p>TX MFB STREAM</p></td>
<td><p>=====</p></td>
<td><p>=====</p></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-crossbarx_stream-tx_mfb_data"><td><p>TX_MFB_DATA</p></td>
<td><p>std_logic_vector(MFB_REGIONS*MFB_REGION_SIZE*MFB_BLOCK_SIZE*MFB_ITEM_WIDTH-1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-crossbarx_stream-tx_mfb_meta"><td><p>TX_MFB_META</p></td>
<td><p>std_logic_vector(MFB_REGIONS*MFB_META_WIDTH-1 downto 0)</p></td>
<td><p>out</p></td>
<td><p>valid with EOF</p></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-crossbarx_stream-tx_mfb_sof_pos"><td><p>TX_MFB_SOF_POS</p></td>
<td><p>std_logic_vector(MFB_REGIONS*max(1,log2(MFB_REGION_SIZE))-1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-crossbarx_stream-tx_mfb_eof_pos"><td><p>TX_MFB_EOF_POS</p></td>
<td><p>std_logic_vector(MFB_REGIONS*max(1,log2(MFB_REGION_SIZE*MFB_BLOCK_SIZE))-1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-crossbarx_stream-tx_mfb_sof"><td><p>TX_MFB_SOF</p></td>
<td><p>std_logic_vector(MFB_REGIONS-1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-crossbarx_stream-tx_mfb_eof"><td><p>TX_MFB_EOF</p></td>
<td><p>std_logic_vector(MFB_REGIONS-1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-crossbarx_stream-tx_mfb_src_rdy"><td><p>TX_MFB_SRC_RDY</p></td>
<td><p>std_logic</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-crossbarx_stream-tx_mfb_dst_rdy"><td><p>TX_MFB_DST_RDY</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
</tbody>
</table>
</dd></dl>

<section id="block-diagram">
<h2>Block diagram<a class="headerlink" href="#block-diagram" title="Link to this heading"></a></h2>
<a class="reference internal image-reference" href="../../../../_images/cx_stream.svg" id="cx-stream-diag"><img alt="" class="align-center" id="cx-stream-diag" src="../../../../_images/cx_stream.svg" style="width: 100%;" />
</a>
</section>
<section id="operations">
<h2>Operations<a class="headerlink" href="#operations" title="Link to this heading"></a></h2>
<ol class="arabic">
<li><p>Discarding : discards come with EOFs. Therefore, they are first transferred from the RX Buffer through the CX Stream to the TX Buffer, where they are overwritten by the next transaction.</p></li>
<li><p>Gap insertion : the Packet Planner component (PP) takes care of this.</p></li>
<li><p>Shrinking and extending logic : the Length and RX Buffer RD address and TX Buffer WR address are adjusted appropriately, before and after the PP.</p>
<blockquote>
<div><ul class="simple">
<li><p>Shrinking: decrease the length only before the PP. When shrinking from the front, also adjust the RX Buffer RD address.</p></li>
<li><p>Extending: increase the length before the PP and decrease it after the PP. The increased length is propagated to the TX Buffer in metadata. When extending at the front, also adjust the TX Buffer WR address.</p></li>
</ul>
</div></blockquote>
</li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../edit/frame_extender/readme.html" class="btn btn-neutral float-left" title="MFB FRAME EXTENDER" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../checksum_calculator/readme.html" class="btn btn-neutral float-right" title="Checksum Calculator" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, CESNET z.s.p.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>