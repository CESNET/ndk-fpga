

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MFB specification &mdash; NDK-FPGA Docs  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme_overrides.css?v=b530091d" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="MFB Reconfigurator" href="flow/reconfigurator/readme.html" />
    <link rel="prev" title="MFB Tools" href="../../mfb.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            NDK-FPGA Docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Application:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../app-minimal.html">Minimal NDK application</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network Development Kit:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_core/doc/how_to_start.html">How to start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_core/doc/terminology.html">NDK Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_core/doc/readme.html">NDK Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_core/doc/configuration.html">Configuration files and parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_core/doc/testing.html">NDK testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_build/readme.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_core/doc/devtree.html">Device Tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_core/doc/faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supported cards:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_cards/reflexces/agi-fh400g/readme.html">ReflexCES XpressSX AGI-FH400G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_cards/intel/dk-dev-1sdx-p/readme.html">Intel Stratix 10 DX FPGA DK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_cards/intel/dk-dev-agi027res/readme.html">Intel Agilex I-Series FPGA DK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_cards/silicom/fb4cgg3/readme.html">Silicom fb4CGg3&#64;VU9P</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_cards/silicom/fb2cghh/readme.html">Silicom fb2CGhh&#64;KU15P</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_cards/silicom/n6010/readme.html">Silicom N6010</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_cards/bittware/ia-420f/readme.html">Bittware IA-420F</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_cards/amd/alveo-u200/readme.html">AMD Alveo U200</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_cards/amd/alveo-u55c/readme.html">AMD Alveo U55C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_cards/amd/vcu118/readme.html">AMD VCU118&#64;VU9P</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ndk_cards/prodesign/pd-falcon/readme.html">PRO DESIGN Falcon</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">VHDL components:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../base.html">Basic Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ctrls.html">Controllers &amp; TSU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mi.html">MI Tools</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../mfb.html">MFB Tools</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">MFB specification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#operation">Operation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generic-parameters">Generic parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#port-description">Port description</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-of-function-of-the-sof-pos-index">Example of function of the SOF_POS index</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-of-function-of-the-eof-pos-index">Example of function of the EOF_POS index</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#timing-diagrams">Timing diagrams</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scenario-1">Scenario 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scenario-2">Scenario 2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#example-configurations">Example configurations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="flow/reconfigurator/readme.html">MFB Reconfigurator</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/frame_packer/readme.html">Frame Packer</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/frame_unpacker/readme.html">Frame Unpacker</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/splitter_simple/readme.html">MFB Splitter Simple</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/splitter_simple/readme.html#id1">MFB Splitter Simple Gen</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/merger_simple/readme.html">MFB Merger Simple</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/merger_simple/readme.html#id1">MFB Merger Simple GEN</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/cutter_simple/readme.html">MFB Cutter Simple</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/dropper/readme.html">MFB Dropper</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/metadata_insertor/readme.html">Metadata Insertor</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/transformer/readme.html">MFB Trasformer</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/pipe/readme.html">MFB PIPE</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/merger/readme.html">MFB Merger</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/splitter/readme.html">MFB Splitter</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/splitter/readme.html#id1">MFB Splitter Gen</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/enabler/readme.html">MFB Enabler</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/rate_limiter/readme.html">Rate Limiter</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/packet_delayer/readme.html">Packet Delayer</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/timestamp_limiter/readme.html">Timestamp Limiter</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/loopback/readme.html">MFB Loopback</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/crossbarx_stream2/readme.html">CROSSBARX STREAM2</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow/frame_masker/readme.html">MFB Frame Masker</a></li>
<li class="toctree-l2"><a class="reference internal" href="edit/frame_trimmer/readme.html">MFB FRAME TRIMMER</a></li>
<li class="toctree-l2"><a class="reference internal" href="edit/frame_extender/readme.html">MFB FRAME EXTENDER</a></li>
<li class="toctree-l2"><a class="reference internal" href="logic/crossbarx_stream/readme.html">CrossbarX Stream</a></li>
<li class="toctree-l2"><a class="reference internal" href="logic/checksum_calculator/readme.html">Checksum Calculator</a></li>
<li class="toctree-l2"><a class="reference internal" href="logic/auxiliary_signals/readme.html">MFB Auxiliary Signals</a></li>
<li class="toctree-l2"><a class="reference internal" href="storage/pd_asfifo/readme.html">MFB Packet Discard ASFIFO</a></li>
<li class="toctree-l2"><a class="reference internal" href="storage/pd_asfifo_simple/readme.html">MFB PD ASFIFO SIMPLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="storage/asfifox/readme.html">MFB ASFIFOX</a></li>
<li class="toctree-l2"><a class="reference internal" href="storage/fifox/readme.html">MFB FIFOX</a></li>
<li class="toctree-l2"><a class="reference internal" href="storage/crossbarx_output_buffer/readme.html">Crossbarx Output Buffer</a></li>
<li class="toctree-l2"><a class="reference internal" href="debug/gen_loop_switch/readme.html">Gen Loop Switch (GLS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="debug/generator/readme.html">MFB Generator</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../mvb.html">MVB Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nic.html">Network Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pcie.html">PCIe Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../debug.html">Debug Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ver.html">UVM Verification</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">NDK-FPGA Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../mfb.html">MFB Tools</a></li>
      <li class="breadcrumb-item active">MFB specification</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/comp/mfb_tools/readme.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="mfb-specification">
<span id="mfb-bus"></span><h1>MFB specification<a class="headerlink" href="#mfb-specification" title="Link to this heading"></a></h1>
<p>The Multi-Frame Bus (MFB) has been created on the basis of need to process
multiple small frames in one clock cycle as well as frames of virtually any
length. MFB features great versatility and is being used in the majority of
our internal communication channels.</p>
<section id="operation">
<h2>Operation<a class="headerlink" href="#operation" title="Link to this heading"></a></h2>
<p>Transmitted data are organized into units called words. Each word is divided
into regions where each region contains a specified number of blocks
which are then composed of single items. Items are the smallest part of the word
where frame edges can be recognized. The length of an item is specified by the
number of bits it contains. Although the length of each part of the word can be
set to possibly any value, the configuration of the bus is set according to its
specific implementation. Not all configurations have to be supported though.</p>
<p>The placement of the begin/end parts of a frame has its limitations. Each region
can contain no more than one ending and no more than one beginning of a frame.
That means there can be either one whole frame or an end of one frame and a
beginning of another frame, but the second frame can not end in this region. A
frame’s beginning must be aligned to a block and frame’s ending must be aligned
to any item. From these rules, it follows that the total number of whole frames,
which can be transmitted in one clock cycle, is equal to the amount of regions.
This is shown in figure “<a class="reference internal" href="#maxframes"><span class="std std-ref">Four whole frames aligned in a single word</span></a>”</p>
<figure class="align-center" id="id5">
<span id="maxframes"></span><a class="reference internal image-reference" href="../../_images/mfb_maxframes.svg"><img alt="../../_images/mfb_maxframes.svg" src="../../_images/mfb_maxframes.svg" style="width: 100%;" />
</a>
<figcaption>
<p><span class="caption-text">Four whole frames aligned in a single word</span><a class="headerlink" href="#id5" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id6">
<span id="absmaxframes"></span><a class="reference internal image-reference" href="../../_images/mfb_abs_maxframes.svg"><img alt="../../_images/mfb_abs_maxframes.svg" src="../../_images/mfb_abs_maxframes.svg" style="width: 100%;" />
</a>
<figcaption>
<p><span class="caption-text">Five frames aligned in a single word, not all are complete though</span><a class="headerlink" href="#id6" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Figure “<a class="reference internal" href="#absmaxframes"><span class="std std-ref">Five frames aligned in a single word, not all are complete though</span></a>” shows that the total amount of frames being
transmitted could be <cite>number of regions + 1</cite> when considering frames that are
incomplete.</p>
<p>The above restrictions allow both the overall design to remain sufficiently
simple and the throughput of the bus to stay high enough.</p>
</section>
<section id="generic-parameters">
<h2>Generic parameters<a class="headerlink" href="#generic-parameters" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Example value</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>REGIONS</p></td>
<td><p>natural</p></td>
<td><p>4</p></td>
<td><p>Amount of regions</p></td>
</tr>
<tr class="row-odd"><td><p>REGION_SIZE</p></td>
<td><p>natural</p></td>
<td><p>8</p></td>
<td><p>Amount of blocks inside every region</p></td>
</tr>
<tr class="row-even"><td><p>BLOCK_SIZE</p></td>
<td><p>natural</p></td>
<td><p>8</p></td>
<td><p>Amount of items inside every block</p></td>
</tr>
<tr class="row-odd"><td><p>ITEM_WIDTH</p></td>
<td><p>natural</p></td>
<td><p>8</p></td>
<td><p>Amount of bits within each item</p></td>
</tr>
</tbody>
</table>
<p>MFB configuration specification is often provided in simplified form as
<strong>MFB#(REGIONS, REGION_SIZE, BLOCK_SIZE, ITEM_WIDTH)</strong>. From these parameters
other internal constants are derived:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Calculation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>WORD_WIDTH</p></td>
<td><p>natural</p></td>
<td><p>REGIONS * REGION_SIZE * BLOCK_SIZE * ITEM_WIDTH</p></td>
</tr>
<tr class="row-odd"><td><p>SOF_POS_WIDTH</p></td>
<td><p>natural</p></td>
<td><p>REGIONS * log2(REGION_SIZE)</p></td>
</tr>
<tr class="row-even"><td><p>EOF_POS_WIDTH</p></td>
<td><p>natural</p></td>
<td><p>REGIONS * log2(REGION_SIZE * BLOCK_SIZE)</p></td>
</tr>
</tbody>
</table>
<p>These constants are used in the following table to describe the length of the
ports of MFB. However in practice, constants can’t be used for port declaration,
instead, they are used for things like signal declaration and such.</p>
</section>
<section id="port-description">
<h2>Port description<a class="headerlink" href="#port-description" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Port name</p></th>
<th class="head"><p>Bit length</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DATA</p></td>
<td><p>WORD_WIDTH</p></td>
<td><p>Transmitter -&gt; Receiver</p></td>
<td><p>Transmitted data</p></td>
</tr>
<tr class="row-odd"><td><p>SOF_POS</p></td>
<td><p>SOF_POS_WIDTH</p></td>
<td><p>Transmitter -&gt; Receiver</p></td>
<td><p>Position of the beginning(s) of a frame(s)</p></td>
</tr>
<tr class="row-even"><td><p>EOF_POS</p></td>
<td><p>EOF_POS_WIDTH</p></td>
<td><p>Transmitter -&gt; Receiver</p></td>
<td><p>Position of the ending(s) of a frame(s)</p></td>
</tr>
<tr class="row-odd"><td><p>SOF</p></td>
<td><p>REGIONS</p></td>
<td><p>Transmitter -&gt; Receiver</p></td>
<td><p>Region mask of the frame beginning(s) in the word</p></td>
</tr>
<tr class="row-even"><td><p>EOF</p></td>
<td><p>REGIONS</p></td>
<td><p>Transmitter -&gt; Receiver</p></td>
<td><p>Region mask of the frame ending(s) in the word</p></td>
</tr>
<tr class="row-odd"><td><p>SRC_RDY</p></td>
<td><p>1</p></td>
<td><p>Transmitter -&gt; Receiver</p></td>
<td><p>Asserted when transmitter is ready to send data</p></td>
</tr>
<tr class="row-even"><td><p>DST_RDY</p></td>
<td><p>1</p></td>
<td><p>Receiver -&gt; Transmitter</p></td>
<td><p>Asserted when receiver is ready to accept data</p></td>
</tr>
</tbody>
</table>
<p>Note: Following examples will be demonstrated on the <strong>MFB#(4,8,8,8)</strong>
configuration.</p>
<p>The <cite>SOF</cite> signal serves to indicate regions in which frame beginnings occur.
When considering the above configuration, the value of <cite>SOF = 1001</cite> means two
frames begin in the current word, one in region 0 and one in region 3. The exact
position of the beginnings of frames can be obtained when reading parts of the
<cite>SOF_POS</cite> signal corresponding to specified regions. According to the <cite>SOF</cite>,
there are no frame beginnings in the first and the second regions. The values of
<cite>SOF_POS</cite> signal in regions 1 and 2 are ignored.</p>
<p>The <cite>SOF_POS</cite> index determines the position of a beginning of a frame, or
positions of multiple beginnings of multiple frames, in a transmitted word. As
mentioned before, the beginning of a frame has to align to the edge of a block
in that region. Therefore when calculating the width of the <cite>SOF_POS</cite> index
(called <cite>SOF_POS_WIDTH</cite>) there is the base-2 logarithm of <cite>REGION_SIZE</cite> which
results in the index of the block, where the frame begins. This index is per
each region, so it needs to be multiplied by the number of <cite>REGIONS</cite>. Then the
result is a group of indexes, which can be used to address multiple beginnings
in a single word simultaneously.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/sof_func.svg"><img alt="../../_images/sof_func.svg" src="../../_images/sof_func.svg" style="width: 100%;" />
</a>
</figure>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The relation between <cite>EOF</cite> and <cite>EOF_POS</cite> signals is the same as the relation
between <cite>SOF</cite> and <cite>SOF_POS</cite>. The value of <cite>EOF = 1110</cite> means that three frames
end in regions 3, 2 and 1. The exact position of the endings can be obtained from
the <cite>EOF_POS</cite> signal.</p>
<p>The <cite>EOF_POS</cite> index determines the position of an ending of a frame, or
positions of multiple endings of multiple frames, in a transmitted word. The
ending does not have to be aligned to the edge of a block but to the edge
of a single item. Therefore, unlike in the calculation of the width of the
<cite>SOF_POS</cite> index, when calculating the width of the <cite>EOF_POS</cite> index (called
<cite>EOF_POS_WIDTH</cite>), there is the base-2 logarithm of the product of <cite>REGION_SIZE</cite>
and <cite>BLOCK_SIZE</cite> which results in the index of an item, where the frame ends.
This number is then multiplied by the number of <cite>REGIONS</cite> and the result is a
group of indexes which can be used to address multiple endings in a single word
simultaneously.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/eof_func.svg"><img alt="../../_images/eof_func.svg" src="../../_images/eof_func.svg" style="width: 100%;" />
</a>
</figure>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="example-of-function-of-the-sof-pos-index">
<h3>Example of function of the SOF_POS index<a class="headerlink" href="#example-of-function-of-the-sof-pos-index" title="Link to this heading"></a></h3>
<p>Index length can be calculated from the given configuration as <cite>SOF_POS_WIDTH =
4 * log2( 8 ) = 4 * 3</cite>, that is a three-bit index of a block in a region which
is finally multiplied by the amount of regions. Those are 12 bits in total to
address multiple SOFs in the whole word.</p>
<ol class="arabic simple">
<li><p><cite>SOF_POS = 101_000_000_000</cite> <a class="footnote-reference brackets" href="#id3" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> signifies the beginning of a frame in the
5th block <a class="footnote-reference brackets" href="#id4" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> of the 3rd region. Position of the SOFs in the remaining
regions is set to 0.</p></li>
<li><p><cite>SOF_POS = 110_010_000_011</cite> points that one start of a frame can be found in
the 3rd block of the zeroth region, one in the 0th block of the 1st region, one in the 2nd
block of the 2nd region and one in the 6th block of the 3rd region.</p></li>
</ol>
</section>
<section id="example-of-function-of-the-eof-pos-index">
<h3>Example of function of the EOF_POS index<a class="headerlink" href="#example-of-function-of-the-eof-pos-index" title="Link to this heading"></a></h3>
<p>According to the configuration parameters given earlier, the <cite>EOF_POS_WIDTH</cite> can
be calculated as <cite>4 * log2( 8 * 8 ) = 4 * 6</cite>, i.e. six-bit index for addressing an
item in a region multiplied by the amount of regions. Altogether, that is 24 bits
with which multiple EOFs in a single word can be addressed.</p>
<ol class="arabic simple">
<li><p><cite>EOF_POS = 000000_000000_000000_000000</cite> determines the position of EOFs to
zeroth item of every region.</p></li>
<li><p><cite>EOF_POS = 001100_011111_000000_000001</cite> determines the position of an EOF on
the first item in the zeroth region, then zeroth item of the first region,
31st item of the second region and last in the 12th item of the third region.</p></li>
<li><p><cite>EOF_POS = 110010_010101_111000_110000</cite> determines the position of an EOF on
the 48th item of the zeroth region, 56th item of the first region, 21st item
of the second region and 50th item of the third region</p></li>
</ol>
<p>Transmission of the data can only occur when both <cite>SRC_RDY</cite> and <cite>DST_RDY</cite>
signals are asserted. The <cite>SRC_RDY</cite> signal determines the validity of data being
transmitted. When asserted, the data coming from the transmitter are considered
valid. The <cite>DST_RDY</cite> signal on the other hand determines the ability of the
receiver to accept incoming data.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When both <cite>SOF</cite> and <cite>EOF</cite> equals 0000 this does not mean that there
are no frames being transmitted in the current word. A situation can
occur when one frame spans through three words and more, thus the
middle word has no SOFs and EOFs and it may appear like that there are
no frames inside. Whether this is the case or the word is empty, is
indicated by the <cite>SRC_RDY</cite> signal.</p>
</div>
</section>
</section>
<section id="timing-diagrams">
<h2>Timing diagrams<a class="headerlink" href="#timing-diagrams" title="Link to this heading"></a></h2>
<p>For the sake of simplicity, the function in the following diagrams will be
demonstrated using bus configuration <strong>MFB#(4,4,2,8)</strong>. The first figure
describes the indexation of each part of the word.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Bit values provided in the next examples are mostly written in binary
form. In case long vectors being used, the values can be provided in
hexadecimal form. These values are distinguished with the letter “x”
written in the beginning of the vector value.</p>
</div>
<figure class="align-center" id="id7">
<a class="reference internal image-reference" href="../../_images/MFB_numbering.svg"><img alt="../../_images/MFB_numbering.svg" src="../../_images/MFB_numbering.svg" style="width: 100%;" />
</a>
<figcaption>
<p><span class="caption-text">Indexation of specific parts of the word.</span><a class="headerlink" href="#id7" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id8">
<a class="reference internal image-reference" href="../../_images/MFB_transaction.svg"><img alt="../../_images/MFB_transaction.svg" src="../../_images/MFB_transaction.svg" style="width: 100%;" />
</a>
<figcaption>
<p><span class="caption-text">Example of five consecutive MFB transactions.</span><a class="headerlink" href="#id8" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Next, two scenarios will be provided showing how these transactions can be
transferred.</p>
<section id="scenario-1">
<h3>Scenario 1<a class="headerlink" href="#scenario-1" title="Link to this heading"></a></h3>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/mfb_waveform_scenario_1.svg"><img alt="../../_images/mfb_waveform_scenario_1.svg" src="../../_images/mfb_waveform_scenario_1.svg" style="width: 100%;" />
</a>
</figure>
<p>In this scenario, all transactions are transmitted consecutively without any
gap. Transmission starts when both <cite>SRC_RDY</cite> and <cite>DST_RDY</cite> are asserted.</p>
</section>
<section id="scenario-2">
<h3>Scenario 2<a class="headerlink" href="#scenario-2" title="Link to this heading"></a></h3>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/mfb_waveform_scenario_2.svg"><img alt="../../_images/mfb_waveform_scenario_2.svg" src="../../_images/mfb_waveform_scenario_2.svg" style="width: 100%;" />
</a>
</figure>
<p>This figure shows how to conduct pause in communication. When <cite>DST_RDY</cite> signal
is deasserted, the transmitter holds the value of data on the bus. But when
transmitter has no data to send (indicated via deassertion of <cite>SRC_RDY</cite> signal) the
value of the data on the bus is undefined.</p>
</section>
</section>
<section id="example-configurations">
<h2>Example configurations<a class="headerlink" href="#example-configurations" title="Link to this heading"></a></h2>
<p>Here are examples of some MFB configurations being used.</p>
<ol class="arabic simple">
<li><p>400G NDK -&gt; MFB#(4,8,8,8)</p></li>
<li><p>100G NDK -&gt; MFB#(1,8,8,8)</p></li>
<li><p>PCIe (P-Tile) -&gt; MFB#(2,1,8,32)</p></li>
</ol>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id3" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Underscore separates the whole vector to make it more clear which part
belongs to its corresponding region. This convention is being used only
for the purposes of this document.</p>
</aside>
<aside class="footnote brackets" id="id4" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>All bit vectors on this page are aligned from the MSB on the left to the
LSB on the right. The same numbering is maintained for the regions, i.e.
the left most region has the highest index whereas the right most has
the lowest index.</p>
</aside>
</aside>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../mfb.html" class="btn btn-neutral float-left" title="MFB Tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="flow/reconfigurator/readme.html" class="btn btn-neutral float-right" title="MFB Reconfigurator" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, CESNET z.s.p.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>