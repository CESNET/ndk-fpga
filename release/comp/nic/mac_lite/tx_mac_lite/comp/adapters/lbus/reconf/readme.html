

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MFB -&gt; LBUS reconfigurator (TX LBUS) &mdash; NDK-FPGA Docs  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../../../../../_static/css/theme_overrides.css?v=b530091d" />

  
      <script src="../../../../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../../../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../../../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../../search.html" />
    <link rel="next" title="40GE Ethernet PHY for Ultrascale+ FPGAs" href="../../../../../../eth_phy/40ge/readme.html" />
    <link rel="prev" title="TX MAC LITE" href="../../../../readme.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../../../index.html" class="icon icon-home">
            NDK-FPGA Docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Application:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../app-minimal.html">Minimal NDK application</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network Development Kit:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_core/doc/how_to_start.html">How to start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_core/doc/terminology.html">NDK Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_core/doc/readme.html">NDK Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_core/doc/configuration.html">Configuration files and parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_core/doc/testing.html">NDK testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_build/readme.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_core/doc/devtree.html">Device Tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_core/doc/faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supported cards:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_cards/reflexces/agi-fh400g/readme.html">ReflexCES XpressSX AGI-FH400G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_cards/intel/dk-dev-1sdx-p/readme.html">Intel Stratix 10 DX FPGA DK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_cards/intel/dk-dev-agi027res/readme.html">Intel Agilex I-Series FPGA DK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_cards/silicom/fb4cgg3/readme.html">Silicom fb4CGg3&#64;VU9P</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_cards/silicom/fb2cghh/readme.html">Silicom fb2CGhh&#64;KU15P</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_cards/silicom/n6010/readme.html">Silicom N6010</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_cards/bittware/ia-420f/readme.html">Bittware IA-420F</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_cards/amd/alveo-u200/readme.html">AMD Alveo U200</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_cards/amd/alveo-u55c/readme.html">AMD Alveo U55C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_cards/amd/vcu118/readme.html">AMD VCU118&#64;VU9P</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ndk_cards/prodesign/pd-falcon/readme.html">PRO DESIGN Falcon</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">VHDL components:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../base.html">Basic Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ctrls.html">Controllers &amp; TSU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../mi.html">MI Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../mfb.html">MFB Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../mvb.html">MVB Tools</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../../../../../nic.html">Network Tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../../rx_mac_lite/readme.html">RX MAC LITE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../readme.html">TX MAC LITE</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">MFB -&gt; LBUS reconfigurator (TX LBUS)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#operation">Operation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#controlling-state-machine">Controlling state machine</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#idle">IDLE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pkt-process">PKT_PROCESS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pkt-end">PKT_END</a></li>
<li class="toctree-l4"><a class="reference internal" href="#word-realign">WORD_REALIGN</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pkt-halt">PKT_HALT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#examples-of-realignment">Examples of realignment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scenario-1">Scenario 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scenario-2">Scenario 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scenario-3">Scenario 3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scenario-4">Scenario 4</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scenario-5">Scenario 5</a></li>
<li class="toctree-l4"><a class="reference internal" href="#scenario-6">Scenario 6</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../eth_phy/40ge/readme.html">40GE Ethernet PHY for Ultrascale+ FPGAs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../pcie.html">PCIe Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../debug.html">Debug Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../ver.html">UVM Verification</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../../../index.html">NDK-FPGA Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../../../../../nic.html">Network Tools</a></li>
      <li class="breadcrumb-item active">MFB -&gt; LBUS reconfigurator (TX LBUS)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../../../_sources/comp/nic/mac_lite/tx_mac_lite/comp/adapters/lbus/reconf/readme.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="mfb-lbus-reconfigurator-tx-lbus">
<span id="mfb-to-lbus-reconf"></span><h1>MFB -&gt; LBUS reconfigurator (TX LBUS)<a class="headerlink" href="#mfb-lbus-reconfigurator-tx-lbus" title="Link to this heading"></a></h1>
<p>This component converts frames from the input with MFB#(1,8,8,8) configuration to the output
with MFB#(1,4,16,8) configuration. The behavior of the output transmission
abides also by the <a class="reference external" href="https://docs.xilinx.com/r/en-US/pg165-cmac/User-Side-LBUS-Interface">LBUS specification</a>. This
component has been made solely for this purpose. Its mode of operation is
similar to the <a class="reference internal" href="../../../../../../../mfb_tools/flow/reconfigurator/readme.html#mfb-reconfigurator"><span class="std std-ref">MFB Reconfigurator</span></a> component (with corresponding generic
parameters). A specific design of this kind allows to better meet the timing
requirements.</p>
<dl class="vhdl autoentity">
<dt class="sig sig-object vhdl" id="vhdl-entity-mfb_to_lbus_reconf">
<span class="k"><span class="pre">ENTITY</span> </span><span class="sig-name descname"><span class="pre">MFB_TO_LBUS_RECONF</span></span><span class="k"> <span class="pre">IS</span></span><a class="headerlink" href="#vhdl-entity-mfb_to_lbus_reconf" title="Link to this definition"></a></dt>
<dd><p>This entity does not have generic paramters alhough it is a MFB to MFB type interface. The
generic paremeters are set from input to output in the following manner: MFB#(1,8,8,8) -&gt;
MFB#(1,4,16,8).</p>
<span class="sig-name descname">Ports</span><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Port</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Mode</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even" id="vhdl-portsignal-mfb_to_lbus_reconf-clk"><td><p>CLK</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-mfb_to_lbus_reconf-rst"><td><p>RST</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-mfb_to_lbus_reconf-rx_mfb_data"><td><p>RX_MFB_DATA</p></td>
<td><p>std_logic_vector(511 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-mfb_to_lbus_reconf-rx_mfb_sof"><td><p>RX_MFB_SOF</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-mfb_to_lbus_reconf-rx_mfb_eof"><td><p>RX_MFB_EOF</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-mfb_to_lbus_reconf-rx_mfb_sof_pos"><td><p>RX_MFB_SOF_POS</p></td>
<td><p>std_logic_vector(2 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-mfb_to_lbus_reconf-rx_mfb_eof_pos"><td><p>RX_MFB_EOF_POS</p></td>
<td><p>std_logic_vector(5 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-mfb_to_lbus_reconf-rx_mfb_src_rdy"><td><p>RX_MFB_SRC_RDY</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-mfb_to_lbus_reconf-rx_mfb_dst_rdy"><td><p>RX_MFB_DST_RDY</p></td>
<td><p>std_logic</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-mfb_to_lbus_reconf-tx_mfb_data"><td><p>TX_MFB_DATA</p></td>
<td><p>std_logic_vector(511 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-mfb_to_lbus_reconf-tx_mfb_sof"><td><p>TX_MFB_SOF</p></td>
<td><p>std_logic</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-mfb_to_lbus_reconf-tx_mfb_eof"><td><p>TX_MFB_EOF</p></td>
<td><p>std_logic</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-mfb_to_lbus_reconf-tx_mfb_sof_pos"><td><p>TX_MFB_SOF_POS</p></td>
<td><p>std_logic_vector(1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-mfb_to_lbus_reconf-tx_mfb_eof_pos"><td><p>TX_MFB_EOF_POS</p></td>
<td><p>std_logic_vector(5 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-mfb_to_lbus_reconf-tx_mfb_src_rdy"><td><p>TX_MFB_SRC_RDY</p></td>
<td><p>std_logic</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-mfb_to_lbus_reconf-tx_mfb_dst_rdy"><td><p>TX_MFB_DST_RDY</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
</tbody>
</table>
</dd></dl>

<section id="operation">
<h2>Operation<a class="headerlink" href="#operation" title="Link to this heading"></a></h2>
<p>The input frame transactions meet the MFB specification while the outgoing
meet the LBUS specification. The second one is similar to the
first with following differences:</p>
<ol class="arabic simple">
<li><p>Outgoing frames have to be transmitted without interruption from
<cite>TX_SOF</cite> to <cite>TX_EOF</cite> (the <cite>TX_SRC_RDY</cite> must not be deasserted
inside a frame). The frames at the input already respect this rule.</p></li>
<li><p>When two frames occur in a single word, the second frame has to start
in the block right after the one where the previous frame has ended.</p></li>
<li><p>When there is only one frame beginning in the word, its beginning has to be
aligned to the beginning of the word.</p></li>
<li><p>The only case in which a gap inside a frame can occur, is when the receiving
side uses the backpressure functionality by deasserting the <cite>TX_DST_RDY</cite>
signal</p></li>
</ol>
<p>Another rule applies to the supported frame lengths. The component has been
designed to process frames as small as 60B and increasing to arbitrary large
ones.</p>
</section>
<section id="controlling-state-machine">
<h2>Controlling state machine<a class="headerlink" href="#controlling-state-machine" title="Link to this heading"></a></h2>
<p>The internal design consists of two <cite>BARREL_SHIFTER_GEN</cite> components which are
controlled by the <cite>sh_fsm</cite> state machine. The simplified transition diagram
looks like the following:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../../../../../../../_images/adapter_fsm-Simplified.svg"><img alt="../../../../../../../../_images/adapter_fsm-Simplified.svg" src="../../../../../../../../_images/adapter_fsm-Simplified.svg" style="width: 50%;" />
</a>
</figure>
<p>Next follows a short description of the behavior in each state.</p>
<section id="idle">
<h3>IDLE<a class="headerlink" href="#idle" title="Link to this heading"></a></h3>
<p>The state machine is reset into the <cite>IDLE</cite> state. The FSM waits for a
frame to come and sets the proper shift on the output according to the frames
<cite>RX_SOF_POS</cite> value. Two consecutive words are buffered on the input every time and
the shift on the output is performed over both of them. This is because a single
word would not be always sufficient to fully fill the output word after the
shift. This state also handles the situation in which a single frame begins and
also ends in one input word or can be shifted in such a way in which this
situation occurs.</p>
</section>
<section id="pkt-process">
<h3>PKT_PROCESS<a class="headerlink" href="#pkt-process" title="Link to this heading"></a></h3>
<p>The <cite>PKT_PROCESS</cite> state processes the frame after receiving a <cite>SOF</cite>.
The shifting does not change in this state. Sometimes, when there is an
<cite>EOF</cite> in the first register, the shifting can be set to a
value where the <cite>EOF</cite> appears in the output word (see
<a class="reference internal" href="#mfb-to-lbus-reconf-scenario5"><span class="std std-ref">Scenario 5</span></a>). In that case, the output is sent out and
the content of the register with <cite>EOF</cite> is ignored in the next cycle.</p>
</section>
<section id="pkt-end">
<h3>PKT_END<a class="headerlink" href="#pkt-end" title="Link to this heading"></a></h3>
<p>The <cite>PKT_END</cite> state is entered when there is an <cite>RX_EOF</cite> of a currently
processed frame. The output MFB signals are set and the <cite>TX_EOF_POS</cite> is set
according to the value by which the frame has been shifted.</p>
</section>
<section id="word-realign">
<h3>WORD_REALIGN<a class="headerlink" href="#word-realign" title="Link to this heading"></a></h3>
<p>The <cite>WORD_REALIGN</cite> state takes care of the situation when two frames occur in a
single word (one frame ends and another begins). The shift of the
ending frame remains unchanged. On the output, the beginning frame is shifted to
the block immediately after the block in which a previous frame has ended.</p>
<p id="mfb-to-lbus-reconf-sh-dir">The majority of the shifting is performed in the <em>DOWN</em> direction, that is from MSB
to LSB, from a block with a higher index to a block with a lower index. However,
there is a situation in which a shift needs to be done in the opposite direction (see the
left half of the picture in <a class="reference internal" href="#mfb-to-lbus-reconf-scenario4"><span class="std std-ref">Scenario 4</span></a>), e.g. the
<cite>RX_SOF</cite> of the beginning frame has to be shifted to the block with a higher
index(<em>UP</em> direction or shifting from LSB to MSB). For example, when <cite>RX_EOF</cite> of
the preceding frame and the <cite>RX_SOF</cite> of the following occur on input blocks
indexed 2 and 3 respectively (blocks are indexed from 0). Adding to that, the
ending frame is not shifted and remains in place. Because the output has half
the number of blocks as the input and with respect to the MFB specification,
the beginning frame needs to be shifted to a block with a higher index on the
output. In this case, the input buffer needs to be stopped because of an
unprocessed block in the first word of the input buffer and that is when the
<cite>PKT_HALT</cite> state comes into place.</p>
</section>
<section id="pkt-halt">
<h3>PKT_HALT<a class="headerlink" href="#pkt-halt" title="Link to this heading"></a></h3>
<p>The input buffer is stopped because the last block remains in the first word.
The shift is set to the usual <em>DOWN</em> direction (to the 0th block) and the
processing of the frame continues (see the right half of the picture in
<a class="reference internal" href="#mfb-to-lbus-reconf-scenario4"><span class="std std-ref">Scenario 4</span></a>).</p>
</section>
</section>
<section id="examples-of-realignment">
<h2>Examples of realignment<a class="headerlink" href="#examples-of-realignment" title="Link to this heading"></a></h2>
<p>The following figures show various forms of realignment of an input frame. The
resolution of those examples is done with respect to MFB blocks. The input
configuration is MFB #(1,8,8,8) and the output is MFB #(1,4,16,8). This is shown
in the following figure:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../../../../../../../_images/mfb_lbus_reconf_realignment-General.svg"><img alt="../../../../../../../../_images/mfb_lbus_reconf_realignment-General.svg" src="../../../../../../../../_images/mfb_lbus_reconf_realignment-General.svg" style="width: 20%;" />
</a>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notice that the input and output words are of the same length.</p>
</div>
<section id="scenario-1">
<h3>Scenario 1<a class="headerlink" href="#scenario-1" title="Link to this heading"></a></h3>
<figure class="align-center">
<a class="reference internal image-reference" href="../../../../../../../../_images/mfb_lbus_reconf_realignment-Simple_real.svg"><img alt="../../../../../../../../_images/mfb_lbus_reconf_realignment-Simple_real.svg" src="../../../../../../../../_images/mfb_lbus_reconf_realignment-Simple_real.svg" style="width: 20%;" />
</a>
</figure>
<p>This figure shows the simplest case in which a basic shift is performed. The
<cite>RX_SOF</cite> is read in the first register and the frame is shifted
accordingly. The output word consists of two parts of the <em>A</em> frame,
the <em>A2</em> is taken from the second register of the input buffer and the <em>A1</em> part
is taken from the first register of the buffer.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The buffering goes from the <cite>RX_MFB_*</cite> input of the component to the first register
and then to the second register.</p>
</div>
</section>
<section id="scenario-2">
<h3>Scenario 2<a class="headerlink" href="#scenario-2" title="Link to this heading"></a></h3>
<figure class="align-center">
<a class="reference internal image-reference" href="../../../../../../../../_images/mfb_lbus_reconf_realignment-Shift_whole.svg"><img alt="../../../../../../../../_images/mfb_lbus_reconf_realignment-Shift_whole.svg" src="../../../../../../../../_images/mfb_lbus_reconf_realignment-Shift_whole.svg" style="width: 20%;" />
</a>
</figure>
<p>A small frame named <em>A</em> begins in the second register and ends in the first,
but after the shift, the frame moves entirely to the output word. There is no
need to care for the B frame because it can be processed in the following cycle.</p>
</section>
<section id="scenario-3">
<h3>Scenario 3<a class="headerlink" href="#scenario-3" title="Link to this heading"></a></h3>
<figure class="align-center">
<a class="reference internal image-reference" href="../../../../../../../../_images/mfb_lbus_reconf_realignment-Two_together.svg"><img alt="../../../../../../../../_images/mfb_lbus_reconf_realignment-Two_together.svg" src="../../../../../../../../_images/mfb_lbus_reconf_realignment-Two_together.svg" style="width: 20%;" />
</a>
</figure>
<p>Two frames occur in the second register, the realignment of the word is done
by only shifting the <em>B</em> frame. The frame <em>B</em>
consists of the content of both of the input registers.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The frame <em>A</em> on the input is shown here without the shift for simplicity.
In real-world conditions, the <em>A</em> frame often has its own shifting based on
its <cite>SOF_POS</cite> value gained in previous transactions.</p>
</div>
</section>
<section id="scenario-4">
<span id="mfb-to-lbus-reconf-scenario4"></span><h3>Scenario 4<a class="headerlink" href="#scenario-4" title="Link to this heading"></a></h3>
<figure class="align-center">
<a class="reference internal image-reference" href="../../../../../../../../_images/mfb_lbus_reconf_realignment-Two_together_back.svg"><img alt="../../../../../../../../_images/mfb_lbus_reconf_realignment-Two_together_back.svg" src="../../../../../../../../_images/mfb_lbus_reconf_realignment-Two_together_back.svg" style="width: 50%;" />
</a>
</figure>
<p>The ending frame <em>A</em> is not shifted and the <em>B</em> frame is shifted in the <em>UP</em>
direction. The reversal of the
usual shifting direction is done in order to adhere to the rules of the MFB
specification where the beginning of a frame needs to be aligned to a block. So
the <cite>SOF</cite> of the <em>B</em> frame is shifted to the next block following the <cite>EOF</cite> of
the previous frame.</p>
<p>The input buffer is stopped in this cycle because there is an unprocessed block
of the <em>B</em> in the second register. In the second cycle (right half of the
picture) the shifting returns to the usual direction and the remaining block
with another content of the <em>B</em> frame from the first register is shifted to the
beginning of the word on the output.</p>
</section>
<section id="scenario-5">
<span id="mfb-to-lbus-reconf-scenario5"></span><h3>Scenario 5<a class="headerlink" href="#scenario-5" title="Link to this heading"></a></h3>
<figure class="align-center">
<a class="reference internal image-reference" href="../../../../../../../../_images/mfb_lbus_reconf_realignment-End_to_curr.svg"><img alt="../../../../../../../../_images/mfb_lbus_reconf_realignment-End_to_curr.svg" src="../../../../../../../../_images/mfb_lbus_reconf_realignment-End_to_curr.svg" style="width: 20%;" />
</a>
</figure>
<p>The frame <em>A</em> undergoes ordinary shifting where the shadowed part has been
processed previously. The current shift causes the <cite>EOF</cite> of a current frame to
appear in the output word so the content of the first register is already
processed in the current cycle. The component then waits for the arrival of the
next frame.</p>
</section>
<section id="scenario-6">
<h3>Scenario 6<a class="headerlink" href="#scenario-6" title="Link to this heading"></a></h3>
<figure class="align-center">
<a class="reference internal image-reference" href="../../../../../../../../_images/mfb_lbus_reconf_realignment-End_to_curr_sec.svg"><img alt="../../../../../../../../_images/mfb_lbus_reconf_realignment-End_to_curr_sec.svg" src="../../../../../../../../_images/mfb_lbus_reconf_realignment-End_to_curr_sec.svg" style="width: 20%;" />
</a>
</figure>
<p>This case is a slight modification of the previous one. The current shift causes
the <em>A</em> frame to appear entirely in the output word. In the next cycle, only the
<cite>SOF</cite> of the <em>B</em> frame is processed because the <cite>EOF</cite> of the <em>A</em> has already
been sent out.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../../../readme.html" class="btn btn-neutral float-left" title="TX MAC LITE" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../../../../../eth_phy/40ge/readme.html" class="btn btn-neutral float-right" title="40GE Ethernet PHY for Ultrascale+ FPGAs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, CESNET z.s.p.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>