<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TX DMA Calypte &mdash; Minimal NDK Application Docs  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/css/theme_overrides.css?v=b530091d" />

  
  <!--[if lt IE 9]>
    <script src="../../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
    <link rel="next" title="Metadata Extractor" href="comp/metadata_extractor/readme.html" />
    <link rel="prev" title="Software Manager" href="../rx/comp/software_manager/readme.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../index.html" class="icon icon-home">
            Minimal NDK Application Docs
          </a>
              <div class="version">
                Git branch: main, <br> Git hash: b4addaa5
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Application:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../app-minimal.html">Minimal NDK application</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network Development Kit:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../ndk_core/doc/how_to_start.html">How to start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../ndk_core/doc/terminology.html">NDK Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../ndk_core/intel/readme.html">NDK architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../ndk_core/doc/configuration.html">Configuration files and parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../ndk_core/doc/testing.html">NDK testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../build/readme.html">Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../ndk_core/doc/devtree.html">Device Tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../ndk_core/doc/faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supported cards:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../ndk_cards/reflexces/agi-fh400g/readme.html">ReflexCES XpressSX AGI-FH400G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../ndk_cards/intel/dk-dev-1sdx-p/readme.html">Intel Stratix 10 DX FPGA DK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../ndk_cards/intel/dk-dev-agi027res/readme.html">Intel Agilex I-Series FPGA DK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../ndk_cards/silicom/fb4cgg3/readme.html">Silicom fb4CGg3&#64;VU9P</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../ndk_cards/silicom/fb2cghh/readme.html">Silicom fb2CGhh&#64;KU15P</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../ndk_cards/silicom/n6010/readme.html">Silicom N6010</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../ndk_cards/bittware/ia-420f/readme.html">Bittware IA-420F</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../ndk_cards/amd/alveo-u200/readme.html">AMD Alveo U200</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../ndk_cards/amd/alveo-u55c/readme.html">AMD Alveo U55C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../ndk_cards/amd/vcu118/readme.html">AMD VCU118&#64;VU9P</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">VHDL components:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../base.html">Basic Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ctrls.html">Controllers &amp; TSU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../mi.html">MI Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../mfb.html">MFB Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../mvb.html">MVB Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../nic.html">Network Tools</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../../pcie.html">PCIe Tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../pcie/mtc/readme.html">MTC (MI Transaction Controller)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pcie/ptc/readme.html">PTC (PCIe Transaction Controller)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pcie/ptc/comp/tag_manager/readme.html">PTC Tag Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pcie/common/readme.html">PCI_EXT_CAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pcie/logic/byte_count/readme.html">PCIE Byte Count</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pcie/logic/byte_en_decoder/readme.html">PCIe Byte Enable Decoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pcie/others/hdr_gen/readme.html">PCIE Header parsing/deparsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../pcie/convertors/readme.html">PCIE CONVERSION UNITS</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../readme.html">DMA Calypte</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../readme.html#supported-pcie-configurations">Supported PCIe Configurations</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../readme.html#local-subcomponents">Local Subcomponents</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../rx/readme.html">RX DMA Calypte</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">TX DMA Calypte</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../debug.html">Debug Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ver.html">UVM Verification</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../index.html">Minimal NDK Application Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../../pcie.html">PCIe Tools</a></li>
          <li class="breadcrumb-item"><a href="../../readme.html">DMA Calypte</a></li>
      <li class="breadcrumb-item active">TX DMA Calypte</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../_sources/ofm_doc/comp/dma/dma_calypte/comp/tx/readme.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tx-dma-calypte">
<span id="id1"></span><h1>TX DMA Calypte<a class="headerlink" href="#tx-dma-calypte" title="Link to this heading"></a></h1>
<p>This is the transmitting part of the DMA Calypte core. TX direction behaves
similarly to the RX DMA Calypte. Data buffers are provided in the hardware to
which the data can be stored. The frames are output on the <em>USR_TX_</em> side and
PCI Express transactions are accepted on the <em>PCIE_CQ_</em> side. Output frame
can constist out of multiple PCIe transactions. Each such frame is delimited
by the DMA header which provides the size of the frame as well as the channel
to which the frame is designated and an address of the first byte of the
frame. PCIe transactions can be send on the unsorted series of adresses. The
DMA header then serves as delimiting block where, after its acceptance,
the frame on the output is read continuously from the address of the first
byte. The block scheme of the TX DMA Calypte controller is provided in the
following figure:</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../../../../../_images/tx_calypte_block-tx_dma_calypte_top.svg"><img alt="../../../../../../_images/tx_calypte_block-tx_dma_calypte_top.svg" src="../../../../../../_images/tx_calypte_block-tx_dma_calypte_top.svg" style="width: 1000px;" /></a>
</figure>
<dl class="vhdl autoentity">
<dt class="sig sig-object vhdl" id="vhdl-entity-tx_dma_calypte">
<span class="k"><span class="pre">ENTITY</span> </span><span class="sig-name descname"><span class="pre">TX_DMA_CALYPTE</span></span><span class="k"> <span class="pre">IS</span></span><a class="headerlink" href="#vhdl-entity-tx_dma_calypte" title="Link to this definition"></a></dt>
<dd><span class="sig-name descname">Generics</span><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Generic</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even" id="vhdl-gengeneric-tx_dma_calypte-device"><td><p>DEVICE</p></td>
<td><p>string</p></td>
<td><p>“ULTRASCALE”</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-tx_dma_calypte-mi_width"><td><p>MI_WIDTH</p></td>
<td><p>natural</p></td>
<td><p>32</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>=====</p></td>
<td><p>Output interface to the FPGA user logic</p></td>
<td><p>=====</p></td>
<td><p>=====</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-tx_dma_calypte-usr_tx_mfb_regions"><td><p>USR_TX_MFB_REGIONS</p></td>
<td><p>natural</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-tx_dma_calypte-usr_tx_mfb_region_size"><td><p>USR_TX_MFB_REGION_SIZE</p></td>
<td><p>natural</p></td>
<td><p>8</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-tx_dma_calypte-usr_tx_mfb_block_size"><td><p>USR_TX_MFB_BLOCK_SIZE</p></td>
<td><p>natural</p></td>
<td><p>8</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-tx_dma_calypte-usr_tx_mfb_item_width"><td><p>USR_TX_MFB_ITEM_WIDTH</p></td>
<td><p>natural</p></td>
<td><p>8</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>=====</p></td>
<td><p>Input PCIe interface (Completer Request)</p></td>
<td><p>=====</p></td>
<td><p>=====</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-tx_dma_calypte-pcie_cq_mfb_regions"><td><p>PCIE_CQ_MFB_REGIONS</p></td>
<td><p>natural</p></td>
<td><p>2</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-tx_dma_calypte-pcie_cq_mfb_region_size"><td><p>PCIE_CQ_MFB_REGION_SIZE</p></td>
<td><p>natural</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-tx_dma_calypte-pcie_cq_mfb_block_size"><td><p>PCIE_CQ_MFB_BLOCK_SIZE</p></td>
<td><p>natural</p></td>
<td><p>8</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-tx_dma_calypte-pcie_cq_mfb_item_width"><td><p>PCIE_CQ_MFB_ITEM_WIDTH</p></td>
<td><p>natural</p></td>
<td><p>32</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>=====</p></td>
<td><p>Setting of internal components</p></td>
<td><p>=====</p></td>
<td><p>=====</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-tx_dma_calypte-data_pointer_width"><td><p>DATA_POINTER_WIDTH</p></td>
<td><p>natural</p></td>
<td><p>13</p></td>
<td><p>Pointer width for data and hdr buffers. The data pointer points to bytes of the packet.
The header pointer points to the header of a current packet.</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-tx_dma_calypte-dma_hdr_pointer_width"><td><p>DMA_HDR_POINTER_WIDTH</p></td>
<td><p>natural</p></td>
<td><p>10</p></td>
<td><p>NOTE: Depracated, the width of the header pointer is calculated from DATA_POINTER_WIDTH</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-tx_dma_calypte-channels"><td><p>CHANNELS</p></td>
<td><p>natural</p></td>
<td><p>32</p></td>
<td><p>Set the number of DMA channels, each channel has its separate buffer</p></td>
</tr>
<tr class="row-even"><td><p>=====</p></td>
<td><p>Others</p></td>
<td><p>=====</p></td>
<td><p>=====</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-tx_dma_calypte-cntrs_width"><td><p>CNTRS_WIDTH</p></td>
<td><p>natural</p></td>
<td><p>64</p></td>
<td><p>Set the width of counters of packets for each channel which are there to provide some
entry level statistics.</p></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-tx_dma_calypte-hdr_meta_width"><td><p>HDR_META_WIDTH</p></td>
<td><p>natural</p></td>
<td><p>24</p></td>
<td><p>Width of the metadata in bits which are stored in the DMA header.</p></td>
</tr>
<tr class="row-odd" id="vhdl-gengeneric-tx_dma_calypte-st_sp_dbg_signal_w"><td><p>ST_SP_DBG_SIGNAL_W</p></td>
<td><p>natural</p></td>
<td><p>4</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-gengeneric-tx_dma_calypte-pkt_size_max"><td><p>PKT_SIZE_MAX</p></td>
<td><p>natural</p></td>
<td><p>2**12</p></td>
<td><p>Size of the largest packets that can be transmitted on the USR_TX_MFB interface.</p></td>
</tr>
</tbody>
</table>
<span class="sig-name descname">Ports</span><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Port</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Mode</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even" id="vhdl-portsignal-tx_dma_calypte-clk"><td><p>CLK</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-tx_dma_calypte-reset"><td><p>RESET</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>=====</p></td>
<td><p>User MFB signals</p></td>
<td><p>=====</p></td>
<td><p>=====</p></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-tx_dma_calypte-usr_tx_mfb_meta_pkt_size"><td><p>USR_TX_MFB_META_PKT_SIZE</p></td>
<td><p>std_logic_vector(log2(PKT_SIZE_MAX + 1) -1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-tx_dma_calypte-usr_tx_mfb_meta_chan"><td><p>USR_TX_MFB_META_CHAN</p></td>
<td><p>std_logic_vector(log2(CHANNELS) -1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-tx_dma_calypte-usr_tx_mfb_meta_hdr_meta"><td><p>USR_TX_MFB_META_HDR_META</p></td>
<td><p>std_logic_vector(HDR_META_WIDTH -1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-tx_dma_calypte-usr_tx_mfb_data"><td><p>USR_TX_MFB_DATA</p></td>
<td><p>std_logic_vector(USR_TX_MFB_REGIONS*USR_TX_MFB_REGION_SIZE*USR_TX_MFB_BLOCK_SIZE*USR_TX_MFB_ITEM_WIDTH-1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-tx_dma_calypte-usr_tx_mfb_sof"><td><p>USR_TX_MFB_SOF</p></td>
<td><p>std_logic_vector(USR_TX_MFB_REGIONS -1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-tx_dma_calypte-usr_tx_mfb_eof"><td><p>USR_TX_MFB_EOF</p></td>
<td><p>std_logic_vector(USR_TX_MFB_REGIONS -1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-tx_dma_calypte-usr_tx_mfb_sof_pos"><td><p>USR_TX_MFB_SOF_POS</p></td>
<td><p>std_logic_vector(USR_TX_MFB_REGIONS*max(1, log2(USR_TX_MFB_REGION_SIZE)) -1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-tx_dma_calypte-usr_tx_mfb_eof_pos"><td><p>USR_TX_MFB_EOF_POS</p></td>
<td><p>std_logic_vector(USR_TX_MFB_REGIONS*max(1, log2(USR_TX_MFB_REGION_SIZE*USR_TX_MFB_BLOCK_SIZE)) -1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-tx_dma_calypte-usr_tx_mfb_src_rdy"><td><p>USR_TX_MFB_SRC_RDY</p></td>
<td><p>std_logic</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-tx_dma_calypte-usr_tx_mfb_dst_rdy"><td><p>USR_TX_MFB_DST_RDY</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>=====</p></td>
<td><p>PCIe Completer Request MFB interface</p></td>
<td><p>=====</p></td>
<td><p>Accepts PCIe write and read requests</p></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-tx_dma_calypte-pcie_cq_mfb_data"><td><p>PCIE_CQ_MFB_DATA</p></td>
<td><p>std_logic_vector(PCIE_CQ_MFB_REGIONS*PCIE_CQ_MFB_REGION_SIZE*PCIE_CQ_MFB_BLOCK_SIZE*PCIE_CQ_MFB_ITEM_WIDTH-1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-tx_dma_calypte-pcie_cq_mfb_meta"><td><p>PCIE_CQ_MFB_META</p></td>
<td><p>std_logic_vector(PCIE_CQ_MFB_REGIONS*PCIE_CQ_META_WIDTH -1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-tx_dma_calypte-pcie_cq_mfb_sof"><td><p>PCIE_CQ_MFB_SOF</p></td>
<td><p>std_logic_vector(PCIE_CQ_MFB_REGIONS -1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-tx_dma_calypte-pcie_cq_mfb_eof"><td><p>PCIE_CQ_MFB_EOF</p></td>
<td><p>std_logic_vector(PCIE_CQ_MFB_REGIONS -1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-tx_dma_calypte-pcie_cq_mfb_sof_pos"><td><p>PCIE_CQ_MFB_SOF_POS</p></td>
<td><p>std_logic_vector(PCIE_CQ_MFB_REGIONS*max(1, log2(PCIE_CQ_MFB_REGION_SIZE)) -1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-tx_dma_calypte-pcie_cq_mfb_eof_pos"><td><p>PCIE_CQ_MFB_EOF_POS</p></td>
<td><p>std_logic_vector(PCIE_CQ_MFB_REGIONS*max(1, log2(PCIE_CQ_MFB_REGION_SIZE*PCIE_CQ_MFB_BLOCK_SIZE)) -1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-tx_dma_calypte-pcie_cq_mfb_src_rdy"><td><p>PCIE_CQ_MFB_SRC_RDY</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-tx_dma_calypte-pcie_cq_mfb_dst_rdy"><td><p>PCIE_CQ_MFB_DST_RDY</p></td>
<td><p>std_logic</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>=====</p></td>
<td><p>Debugging signals</p></td>
<td><p>=====</p></td>
<td><p>=====</p></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-tx_dma_calypte-st_sp_dbg_chan"><td><p>ST_SP_DBG_CHAN</p></td>
<td><p>std_logic_vector(log2(CHANNELS) -1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-tx_dma_calypte-st_sp_dbg_meta"><td><p>ST_SP_DBG_META</p></td>
<td><p>std_logic_vector(ST_SP_DBG_SIGNAL_W -1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>=====</p></td>
<td><p>Control MI bus</p></td>
<td><p>=====</p></td>
<td><p>=====</p></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-tx_dma_calypte-mi_addr"><td><p>MI_ADDR</p></td>
<td><p>std_logic_vector(MI_WIDTH -1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-tx_dma_calypte-mi_dwr"><td><p>MI_DWR</p></td>
<td><p>std_logic_vector(MI_WIDTH -1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-tx_dma_calypte-mi_be"><td><p>MI_BE</p></td>
<td><p>std_logic_vector(MI_WIDTH/8 -1 downto 0)</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-tx_dma_calypte-mi_rd"><td><p>MI_RD</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-tx_dma_calypte-mi_wr"><td><p>MI_WR</p></td>
<td><p>std_logic</p></td>
<td><p>in</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-tx_dma_calypte-mi_drd"><td><p>MI_DRD</p></td>
<td><p>std_logic_vector(MI_WIDTH -1 downto 0)</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-even" id="vhdl-portsignal-tx_dma_calypte-mi_ardy"><td><p>MI_ARDY</p></td>
<td><p>std_logic</p></td>
<td><p>out</p></td>
<td></td>
</tr>
<tr class="row-odd" id="vhdl-portsignal-tx_dma_calypte-mi_drdy"><td><p>MI_DRDY</p></td>
<td><p>std_logic</p></td>
<td><p>out</p></td>
<td></td>
</tr>
</tbody>
</table>
</dd></dl>

<section id="control-status-registers">
<h2>Control/Status Registers<a class="headerlink" href="#control-status-registers" title="Link to this heading"></a></h2>
<p>In order for the controller to be controlled by the software, an address space
with configuration/status (C/S) registers is initialized. Currently, each
channel contains its own set of registers with the overall size of 128 B. The
1st channel’s registers are located on the address <em>0x00</em>, the second on <em>0x80</em>, the
third on <em>0x100</em>, etc. The address offset of the whole TX controller within the DMA
engine is <em>0x200000</em>. The registers are connected through <a class="reference internal" href="../../../../mi_tools/readme.html#mi-bus"><span class="std std-ref">MI bus</span></a> to
the global configuration tree. The set of C/S for one channel is listed in
the following table.</p>
<table class="docutils align-center" id="id2">
<caption><span class="caption-text">Tab. 1</span><a class="headerlink" href="#id2" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Address</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Access permission (FPGA/Host)</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0x00</p></td>
<td><p>Control</p></td>
<td><p>R/W</p></td>
<td><p>Bit 0: Set to 1 to request the enable of a channel. Set to 0 to request stop of a channel.</p></td>
</tr>
<tr class="row-odd"><td><p>0x04</p></td>
<td><p>Status</p></td>
<td><p>W/R</p></td>
<td><p>Bit 0: Set to 1 if a channel is enabled. Set to 0 if the channel is disabled.</p></td>
</tr>
<tr class="row-even"><td><p>0x08</p></td>
<td><p>-Reserved-</p></td>
<td><p>N/A</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>0x0C</p></td>
<td><p>-Reserved-</p></td>
<td><p>N/A</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>0x10</p></td>
<td><p>Software data pointer (SDP)</p></td>
<td><p>R/W</p></td>
<td><p>Writing pointer for data (up to 16 bits)</p></td>
</tr>
<tr class="row-odd"><td><p>0x14</p></td>
<td><p>Software header pointer (SDP)</p></td>
<td><p>R/W</p></td>
<td><p>Writing pointer for headers (up to 16 bits)</p></td>
</tr>
<tr class="row-even"><td><p>0x18</p></td>
<td><p>Hardware data pointer (HDP)</p></td>
<td><p>R/W</p></td>
<td><p>Reading pointer for data (up to 16 bits)</p></td>
</tr>
<tr class="row-odd"><td><p>0x1C</p></td>
<td><p>Hardware header pointer (HHP)</p></td>
<td><p>R/W</p></td>
<td><p>Reading pointer for headers (up to 16 bits)</p></td>
</tr>
<tr class="row-even"><td><p>0x20</p></td>
<td><p>-Reserved-</p></td>
<td><p>N/A</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>0x24</p></td>
<td><p>-Reserved-</p></td>
<td><p>N/A</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>0x28</p></td>
<td><p>-Reserved-</p></td>
<td><p>N/A</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>0x2C</p></td>
<td><p>-Reserved-</p></td>
<td><p>N/A</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>0x30</p></td>
<td><p>-Reserved-</p></td>
<td><p>N/A</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>0x34</p></td>
<td><p>-Reserved-</p></td>
<td><p>N/A</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>0x38</p></td>
<td><p>-Reserved-</p></td>
<td><p>N/A</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>0x3C</p></td>
<td><p>-Reserved-</p></td>
<td><p>N/A</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>0x40</p></td>
<td><p>-Reserved-</p></td>
<td><p>N/A</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>0x44</p></td>
<td><p>-Reserved-</p></td>
<td><p>N/A</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>0x48</p></td>
<td><p>-Reserved-</p></td>
<td><p>N/A</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>0x4C</p></td>
<td><p>-Reserved-</p></td>
<td><p>N/A</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>0x50</p></td>
<td><p>-Reserved-</p></td>
<td><p>N/A</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>0x54</p></td>
<td><p>-Reserved-</p></td>
<td><p>N/A</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>0x58</p></td>
<td><p>Data pointer mask (DPM)</p></td>
<td><p>W/R</p></td>
<td><p>Mask for the data pointers (determines data buffer size)</p></td>
</tr>
<tr class="row-odd"><td><p>0x5C</p></td>
<td><p>Header pointer mask (HPM)</p></td>
<td><p>W/R</p></td>
<td><p>Mask for the header pointers (determines header buffer size)</p></td>
</tr>
<tr class="row-even"><td><p>0x60</p></td>
<td><p>Received packetsL</p></td>
<td><p>W/RW (Strobe)</p></td>
<td><p>Counter of received packets (lower part)</p></td>
</tr>
<tr class="row-odd"><td><p>0x64</p></td>
<td><p>Received packetsH</p></td>
<td><p>W/RW (Strobe)</p></td>
<td><p>Counter of received packets (upper part)</p></td>
</tr>
<tr class="row-even"><td><p>0x68</p></td>
<td><p>Received bytesL</p></td>
<td><p>W/RW (Strobe)</p></td>
<td><p>Counter of received bytes (lower part)</p></td>
</tr>
<tr class="row-odd"><td><p>0x6C</p></td>
<td><p>Received bytesH</p></td>
<td><p>W/RW (Strobe)</p></td>
<td><p>Counter of received bytes (upper part)</p></td>
</tr>
<tr class="row-even"><td><p>0x70</p></td>
<td><p>Discarded packetsL</p></td>
<td><p>W/RW (Strobe)</p></td>
<td><p>Counter of discarded packets (lower part)</p></td>
</tr>
<tr class="row-odd"><td><p>0x74</p></td>
<td><p>Discarded packetsH</p></td>
<td><p>W/RW (Strobe)</p></td>
<td><p>Counter of discarded packets (upper part)</p></td>
</tr>
<tr class="row-even"><td><p>0x78</p></td>
<td><p>Discarded bytesL</p></td>
<td><p>W/RW (Strobe)</p></td>
<td><p>Counter of discarded bytes (lower part)</p></td>
</tr>
<tr class="row-odd"><td><p>0x7C</p></td>
<td><p>Discarded bytesH</p></td>
<td><p>W/RW (Strobe)</p></td>
<td><p>Counter of discarded bytes (upper part)</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some registers have a <em>strobe</em> functionality in which case specific
writes on a counter’s address need to be issued from the host in order to
manipulate a counter’s register:</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">0x0<span class="colon">:</span></dt>
<dd class="field-odd"><p>Resets a counter and its register</p>
</dd>
<dt class="field-even">0x1<span class="colon">:</span></dt>
<dd class="field-even"><p>Samples a value of a counter to its register</p>
</dd>
<dt class="field-odd">0x2<span class="colon">:</span></dt>
<dd class="field-odd"><p>Combination of the two previous, e.g. a value of a counter is sampled
to its register and the counter is put to reset.</p>
</dd>
</dl>
</div></blockquote>
</div>
<section id="uvm-verification">
<h3>UVM Verification<a class="headerlink" href="#uvm-verification" title="Link to this heading"></a></h3>
<figure class="align-center">
<a class="reference internal image-reference" href="../../../../../../_images/uvm_ver1.jpg"><img alt="../../../../../../_images/uvm_ver1.jpg" src="../../../../../../_images/uvm_ver1.jpg" style="width: 390.59999999999997px; height: 294.59999999999997px;" /></a>
</figure>
</section>
</section>
<section id="verification-plan">
<h2>Verification Plan<a class="headerlink" href="#verification-plan" title="Link to this heading"></a></h2>
<p>All of these tests were checked in a verification with a random seed. The verification
files are located in the <code class="docutils literal notranslate"><span class="pre">uvm/</span></code> directory</p>
<table class="docutils align-center" id="id3">
<caption><span class="caption-text">Tab. 2</span><a class="headerlink" href="#id3" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 11.1%" />
<col style="width: 33.3%" />
<col style="width: 11.1%" />
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 11.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Requirement level</p></th>
<th class="head"><p>Checked by</p></th>
<th class="head"><p>Status</p></th>
<th class="head"><p>Test name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>base</p></td>
<td><p>Simple packet transfer and check if no packets are droped/damaged on an enabled channel. Randomly
enable/disable the channels (check the packet counters on the end).</p></td>
<td><p>Required</p></td>
<td><p>Counter check on the end of test</p></td>
<td><p>Verified</p></td>
<td><p>test::base</p></td>
</tr>
<tr class="row-odd"><td><p>mult_region</p></td>
<td><p>For a multiple-regions configuration vary the packet begins/ends in all regions. This puts the
transaction buffer under stress test.</p></td>
<td><p>Required</p></td>
<td><p>Func. cover</p></td>
<td><p>Verified</p></td>
<td><p>test::base/test::speed</p></td>
</tr>
<tr class="row-even"><td><p>pkt_drop</p></td>
<td><p>Check if packets are droped on a disabled channel. Check if the counters of dropped packets have
correct values.</p></td>
<td><p>Required</p></td>
<td><p>Packet counter check on the end of a test</p></td>
<td><p>Unverified</p></td>
<td><p>test::base</p></td>
</tr>
<tr class="row-odd"><td><p>thrp_meas</p></td>
<td><p>Measure throughput in Gbps.</p></td>
<td><p>Optional</p></td>
<td><p>Reported periodically by the <em>statistics</em> class from the <code class="docutils literal notranslate"><span class="pre">uvm_mfb</span></code> environment. (The verbosity needs
to be set to <code class="docutils literal notranslate"><span class="pre">UVM_LOW</span></code> in order to display these statistics)</p></td>
<td><p>Verified</p></td>
<td><p>test::speed</p></td>
</tr>
<tr class="row-even"><td><p>lat_meas</p></td>
<td><p>Measure latency from input to output. Report average value, maximum,
minimum and standard deviation. Repeat 10000 times and report values in
the documentation.</p></td>
<td><p>Optional</p></td>
<td><p>None</p></td>
<td><p>Unverified</p></td>
<td><p>Special sequence that does measurement for a single packet.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="local-subcomponents">
<h2>Local Subcomponents<a class="headerlink" href="#local-subcomponents" title="Link to this heading"></a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="comp/metadata_extractor/readme.html">Metadata Extractor</a></li>
<li class="toctree-l1"><a class="reference internal" href="comp/chan_start_stop_ctrl/readme.html">Channel Start/stop control</a></li>
<li class="toctree-l1"><a class="reference internal" href="comp/packet_dispatcher/readme.html">Packet Dispatcher</a></li>
<li class="toctree-l1"><a class="reference internal" href="comp/pcie_trans_buffer/readme.html">Transaction buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="comp/software_manager/readme.html">Software Manager</a></li>
</ul>
</div>
</section>
<section id="general-subcomponents">
<h2>General Subcomponents<a class="headerlink" href="#general-subcomponents" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../../../../base/fifo/fifox_multi/readme.html#fifox-multi"><span class="std std-ref">FIFOX Multi</span></a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../rx/comp/software_manager/readme.html" class="btn btn-neutral float-left" title="Software Manager" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="comp/metadata_extractor/readme.html" class="btn btn-neutral float-right" title="Metadata Extractor" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, CESNET z.s.p.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>